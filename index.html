<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Renette: System Override | –Ø–±–ª–æ—á–Ω—ã–π –ü—Ä–µ—Å–µ—Ç</title>
    <meta name="description" content="–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ç–æ—Ä –ø—Ä–µ—Å–µ—Ç–∞ '–Ø–±–ª–æ—á–Ω—ã–π'.">
    <meta name="google-site-verification" content="L1aS8txxzlMjDV_Efl0Oi1WDR0J7_DCdyazGjG1zVPk" />

    <!-- Fonts & Icons -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code:wght@300;600&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@300;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        :root {
            /* Palette */
            --bg-deep: #121214;
            --bg-panel: #1a1a1e;
            --bg-lighter: #232328;

            --mint: #69f0ae;
            --mint-glow: rgba(105, 240, 174, 0.4);

            --red: #ff5252;
            --red-glow: rgba(255, 82, 82, 0.4);

            --lilac: #e040fb;
            --lilac-glow: rgba(224, 64, 251, 0.4);

            --text-main: #e0e0e0;
            --text-mute: #858590;

            --border: 1px solid rgba(255, 255, 255, 0.08);
            --radius: 4px; /* Techy sharp corners */
        }

        /* --- GLOBAL & RESET --- */
        * { box-sizing: border-box; scroll-behavior: smooth; }
        body {
            margin: 0;
            background-color: var(--bg-deep);
            color: var(--text-main);
            font-family: 'Rajdhani', sans-serif;
            overflow-x: hidden;
            font-size: 16px;
        }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: var(--bg-deep); }
        ::-webkit-scrollbar-thumb { background: var(--lilac); }

        /* --- BACKGROUND CANVAS --- */
        #interactive-bg {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: -1;
        }

        /* --- TYPOGRAPHY & DECOR --- */
        h1, h2, h3 { font-family: 'Orbitron', sans-serif; text-transform: uppercase; margin: 0; }
        .mono { font-family: 'Fira Code', monospace; font-size: 0.9em; }

        .accent-mint { color: var(--mint); text-shadow: 0 0 10px var(--mint-glow); }
        .accent-red { color: var(--red); text-shadow: 0 0 10px var(--red-glow); }
        .accent-lilac { color: var(--lilac); text-shadow: 0 0 10px var(--lilac-glow); }

        .glitch-text {
            position: relative;
        }
        .glitch-text::before, .glitch-text::after {
            content: attr(data-text);
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            background: var(--bg-deep);
        }
        .glitch-text::before {
            left: 2px; text-shadow: -1px 0 var(--red);
            clip-path: polygon(0 0, 100% 0, 100% 35%, 0 35%);
            animation: glitch-anim-1 2.5s infinite linear alternate-reverse;
        }
        .glitch-text::after {
            left: -2px; text-shadow: -1px 0 var(--mint);
            clip-path: polygon(0 65%, 100% 65%, 100% 100%, 0 100%);
            animation: glitch-anim-2 3s infinite linear alternate-reverse;
        }

        @keyframes glitch-anim-1 {
            0% { clip-path: inset(20% 0 80% 0); }
            20% { clip-path: inset(60% 0 10% 0); }
            100% { clip-path: inset(10% 0 50% 0); }
        }
        @keyframes glitch-anim-2 {
            0% { clip-path: inset(10% 0 60% 0); }
            20% { clip-path: inset(30% 0 20% 0); }
            100% { clip-path: inset(80% 0 5% 0); }
        }

        /* --- HEADER STRUCTURE --- */
        .cyber-header {
            position: relative;
            height: 90vh;
            display: grid;
            grid-template-columns: 5% 45% 45% 5%;
            align-items: center;
            border-bottom: 2px solid var(--lilac);
            overflow: hidden;
        }

        .header-content {
            grid-column: 2 / 4;
            z-index: 2;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .title-block h1 {
            font-size: 5rem;
            line-height: 0.9;
            letter-spacing: 5px;
        }

        .mascot-frame {
            width: 350px;
            height: 350px;
            border: 2px solid var(--mint);
            position: relative;
            background: url('https://files.catbox.moe/placeholder_renette_header.jpg') center/cover; /* PLACEHOLDER */
            box-shadow: 10px 10px 0px var(--red);
        }

        .mascot-frame::after {
            content: "RENETTE_SYS_V2.0";
            position: absolute;
            bottom: -25px;
            right: 0;
            background: var(--red);
            color: #000;
            padding: 2px 10px;
            font-family: 'Fira Code', monospace;
            font-weight: bold;
        }

        .marquee-container {
            position: absolute;
            bottom: 20px;
            width: 100%;
            background: rgba(0,0,0,0.5);
            padding: 5px 0;
            font-family: 'Fira Code', monospace;
            color: var(--mint);
            border-top: 1px solid var(--mint);
            border-bottom: 1px solid var(--mint);
        }

        /* --- MAIN LAYOUT --- */
        .wrapper {
            display: grid;
            grid-template-columns: 300px 1fr;
            max-width: 1600px;
            margin: 0 auto;
            gap: 40px;
            padding: 40px 20px;
            position: relative;
        }

        /* --- SIDEBAR (Sticky) --- */
        .sidebar {
            position: sticky;
            top: 40px;
            height: fit-content;
            background: var(--bg-panel);
            border: var(--border);
            padding: 20px;
            border-left: 3px solid var(--red);
        }

        .sidebar-stat {
            display: flex;
            justify-content: space-between;
            margin-bottom: 15px;
            border-bottom: 1px solid rgba(255,255,255,0.05);
            padding-bottom: 5px;
        }

        .btn-action {
            width: 100%;
            padding: 15px;
            margin-top: 20px;
            background: transparent;
            border: 1px solid var(--mint);
            color: var(--mint);
            font-family: 'Orbitron', sans-serif;
            cursor: pointer;
            transition: 0.3s;
            text-transform: uppercase;
            font-weight: bold;
            position: relative;
            overflow: hidden;
        }

        .btn-action:hover {
            background: var(--mint);
            color: #000;
            box-shadow: 0 0 20px var(--mint-glow);
        }

        .btn-dl {
            border-color: var(--lilac);
            color: var(--lilac);
            margin-top: 10px;
        }
        .btn-dl:hover {
            background: var(--lilac);
            color: #000;
            box-shadow: 0 0 20px var(--lilac-glow);
        }

        /* --- BUILDER SECTIONS --- */
        .builder-section {
            background: var(--bg-panel);
            margin-bottom: 40px;
            border: var(--border);
            position: relative;
        }

        /* Decorative Corners */
        .builder-section::before {
            content: ''; position: absolute; top: -1px; left: -1px;
            width: 20px; height: 20px; border-top: 2px solid var(--mint); border-left: 2px solid var(--mint);
        }
        .builder-section::after {
            content: ''; position: absolute; bottom: -1px; right: -1px;
            width: 20px; height: 20px; border-bottom: 2px solid var(--mint); border-right: 2px solid var(--mint);
        }

        .sec-header {
            background: linear-gradient(90deg, rgba(224, 64, 251, 0.1) 0%, transparent 100%);
            padding: 15px 20px;
            border-bottom: var(--border);
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .sec-num {
            font-size: 2rem;
            color: rgba(255,255,255,0.1);
            font-weight: 900;
        }

        .sec-content {
            padding: 25px;
        }

        /* --- CONTROL GROUPS --- */
        .control-group {
            margin-bottom: 30px;
        }
        .group-label {
            color: var(--text-mute);
            font-size: 0.9em;
            text-transform: uppercase;
            margin-bottom: 10px;
            display: block;
            border-left: 2px solid var(--lilac);
            padding-left: 10px;
        }

        /* --- CUSTOM INPUTS (Radio/Check) --- */
        .option-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .cyber-option {
            position: relative;
            cursor: pointer;
        }

        .cyber-option input {
            position: absolute;
            opacity: 0;
            cursor: pointer;
        }

        .opt-box {
            background: var(--bg-lighter);
            padding: 15px;
            border: 1px solid transparent;
            transition: 0.3s;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .opt-box:hover {
            border-color: rgba(255,255,255,0.2);
            transform: translateY(-2px);
        }

        /* Checked State Styling */
        .cyber-option input:checked + .opt-box {
            border-color: var(--mint);
            background: rgba(105, 240, 174, 0.05);
            box-shadow: inset 0 0 15px rgba(105, 240, 174, 0.1);
        }

        /* Specific for Radio vs Checkbox visual cue */
        .cyber-option input[type="radio"] + .opt-box::after {
            content: '‚óè'; position: absolute; top: 10px; right: 10px; color: var(--text-mute);
        }
        .cyber-option input[type="radio"]:checked + .opt-box::after {
            color: var(--mint);
        }

        .cyber-option input[type="checkbox"] + .opt-box::after {
            content: '‚ñ†'; position: absolute; top: 10px; right: 10px; color: var(--text-mute);
        }
        .cyber-option input[type="checkbox"]:checked + .opt-box::after {
            color: var(--lilac); border-color: var(--lilac);
        }

        /* Specific Override for Checkboxes being Lilac */
        .cyber-option input[type="checkbox"]:checked + .opt-box {
             border-color: var(--lilac);
             background: rgba(224, 64, 251, 0.05);
        }

        .opt-title { font-weight: bold; margin-bottom: 5px; color: #fff; }
        .opt-desc { font-size: 0.8em; color: var(--text-mute); line-height: 1.4; }

        /* --- COMPLEX TEMPLATE BLOCK (Block 4) --- */
        .template-container {
            background: rgba(0,0,0,0.3);
            border: 1px dashed var(--text-mute);
            padding: 20px;
            margin-top: 15px;
        }

        .sub-group-header {
            font-family: 'Fira Code', monospace;
            color: var(--red);
            margin: 20px 0 10px 0;
            font-size: 0.85rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        .sub-group-header::after { content: ''; flex: 1; height: 1px; background: var(--red); opacity: 0.3; }

        /* --- MODAL (Lightbox) --- */
        .lightbox {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(18, 18, 20, 0.95);
            z-index: 9999;
            display: none;
            justify-content: center;
            align-items: center;
        }
        .lightbox.active { display: flex; }

        .lb-content {
            background: var(--bg-panel);
            border: 2px solid var(--lilac);
            max-width: 800px;
            width: 90%;
            max-height: 90vh;
            overflow-y: auto;
            position: relative;
            padding: 20px;
        }

        .lb-close {
            position: absolute; top: 10px; right: 10px;
            background: none; border: none; color: var(--red);
            font-size: 1.5rem; cursor: pointer;
        }
        .lb-img { width: 100%; margin-bottom: 20px; border: 1px solid #333; }

        /* Responsive */
        @media (max-width: 900px) {
            .cyber-header { grid-template-columns: 1fr; height: auto; padding: 50px 20px; text-align: center; }
            .header-content { grid-column: 1; flex-direction: column-reverse; gap: 30px; }
            .wrapper { grid-template-columns: 1fr; }
            .sidebar { position: static; margin-bottom: 40px; }
            .title-block h1 { font-size: 3rem; }
        }
    </style>
</head>
<body>

    <canvas id="interactive-bg"></canvas>

    <!-- Header -->
    <header class="cyber-header">
        <div class="header-content">
            <div class="title-block">
                <h3 class="accent-mint mono">// SIL_TAV_PRESET</h3>
                <h1 class="glitch-text" data-text="APPLE">APPLE</h1>
                <h2 class="accent-lilac">PROTOCOL: RENETTE</h2>
                <p style="margin-top: 20px; max-width: 500px; color: var(--text-mute);">
                    –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–∏–º—É–ª—è—Ü–∏–∏. –ñ–∏–≤–æ–π –º–∏—Ä, —Å—É—Ö–æ–π —é–º–æ—Ä –∏ —Ü–∏—Ñ—Ä–æ–≤–∞—è –º–∞–≥–∏—è.
                    <br><span class="mono accent-red">[SYSTEM STATUS: ONLINE]</span>
                </p>
            </div>
            <div class="mascot-frame">
                <!-- Mascot Image CSS background -->
            </div>
        </div>
        <div class="marquee-container">
            <marquee scrollamount="10">
                INITIALIZING CORE... LOADING MODULES... WARNING: SENTIENCE DETECTED... DO NOT FEED THE AI... RENETTE IS WATCHING...
            </marquee>
        </div>
    </header>

    <!-- Main Configurator -->
    <div class="wrapper">

        <!-- SIDEBAR -->
        <aside class="sidebar">
            <h3 style="border-bottom: 2px solid var(--red); padding-bottom: 10px; margin-bottom: 20px;">
                –°–ë–û–†–ö–ê <span class="mono" style="font-size: 0.5em; float: right;">LIVE</span>
            </h3>

            <div class="sidebar-stat">
                <span class="mono">Total Blocks</span>
                <span class="accent-mint" id="count-total">0</span>
            </div>
            <div class="sidebar-stat">
                <span class="mono">Status</span>
                <span class="accent-lilac">Waiting input...</span>
            </div>

            <button class="btn-action" onclick="assemblePreset()">
                <i class="fa-solid fa-copy"></i> –°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É
            </button>

            <a href="https://github.com/YOUR_REPO/archive/refs/heads/main.zip" class="btn-action btn-dl" style="text-decoration: none; display: block; text-align: center;">
                <i class="fa-brands fa-github"></i> –°–∫–∞—á–∞—Ç—å JSON
            </a>

            <div style="margin-top: 30px; font-size: 0.8rem; color: #555;">
                <p>–í–µ—Ä—Å–∏—è: 2.1.4<br>–ê–≤—Ç–æ—Ä: Kukaaj</p>
            </div>
        </aside>

        <!-- MODULES AREA -->
        <main id="builder-area">

            <!-- 1. OOC -->
            <section class="builder-section">
                <div class="sec-header">
                    <span class="sec-num">01</span>
                    <h3>OOC <span class="mono accent-red">// –õ–∏—á–Ω–æ—Å—Ç—å –†–µ–Ω–µ—Ç—Ç</span></h3>
                </div>
                <div class="sec-content">
                    <div class="option-grid">
                        <label class="cyber-option">
                            <input type="checkbox" checked disabled>
                            <div class="opt-box" style="border-color: var(--mint); opacity: 0.7;">
                                <span class="opt-title">Default OOC</span>
                                <span class="opt-desc">–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π –º–æ–¥—É–ª—å –ª–∏—á–Ω–æ—Å—Ç–∏. –ù–µ—Ç –≤–∞—Ä–∏–∞—Ü–∏–π.</span>
                            </div>
                        </label>
                    </div>
                </div>
            </section>

            <!-- 2. MAIN (With Variants) -->
            <section class="builder-section">
                <div class="sec-header">
                    <span class="sec-num">02</span>
                    <h3>–û–°–ù–û–í–ù–û–ï <span class="mono accent-mint">// –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –Ø–¥—Ä–∞</span></h3>
                </div>
                <div class="sec-content" id="block-main">
                    <!-- JS will inject variants here -->
                </div>
            </section>

            <!-- 3. RATING -->
            <section class="builder-section">
                <div class="sec-header">
                    <span class="sec-num">03</span>
                    <h3>–†–ï–ô–¢–ò–ù–ì <span class="mono accent-red">// R-18</span></h3>
                </div>
                <div class="sec-content">
                    <div class="opt-box" style="border: 1px dashed var(--red);">
                        <span class="opt-title">üîû NSFW Active</span>
                        <span class="opt-desc">–í–∫–ª—é—á–µ–Ω–æ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é. –í–∞—Ä–∏–∞—Ü–∏–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç.</span>
                    </div>
                </div>
            </section>

            <!-- 4. EXTRA (Complex) -->
            <section class="builder-section">
                <div class="sec-header">
                    <span class="sec-num">04</span>
                    <h3>–î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–û <span class="mono accent-lilac">// –®—Ç—É–∫–∏ & HTML</span></h3>
                </div>
                <div class="sec-content">

                    <!-- HTML VARS -->
                    <div class="control-group">
                        <span class="group-label">üßÉ HTML Engine (–í—ã–±–µ—Ä–∏ 1)</span>
                        <div class="option-grid" id="html-options">
                            <!-- JS -->
                        </div>
                    </div>

                    <!-- STUFF TEMPLATE CONTAINER -->
                    <div class="template-container">
                        <h4 class="accent-mint"><i class="fa-solid fa-box-open"></i> ‚úéüß∫ –®–¢–£–ö–ò (–ö–û–ù–¢–ï–ô–ù–ï–†)</h4>
                        <p class="mono" style="font-size: 0.8rem; margin-bottom: 20px;">–í—Å–µ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –Ω–∏–∂–µ –º–æ–¥—É–ª–∏ –±—É–¥—É—Ç —É–ø–∞–∫–æ–≤–∞–Ω—ã –≤ –æ–¥–∏–Ω —Å–∏—Å—Ç–µ–º–Ω—ã–π –ø—Ä–æ–º–ø—Ç.</p>

                        <!-- Simple Toggles (8 vars) -->
                        <div class="sub-group-header">–û–ë–©–ò–ï –ú–û–î–£–õ–ò (Multi-Select)</div>
                        <div class="option-grid" id="stuff-simple"></div>

                        <!-- Info Blocks (1 var) -->
                        <div class="sub-group-header">–ò–ù–§–û–ë–õ–û–ö–ò (Select ONE)</div>
                        <div class="option-grid" id="stuff-info"></div>

                        <!-- Settings Mode (1 var) -->
                        <div class="sub-group-header">–†–ï–ñ–ò–ú –ù–ê–°–¢–†–û–ô–ö–ò (Select ONE)</div>
                        <div class="option-grid" id="stuff-settings"></div>

                        <!-- CYOA (1 var) -->
                        <div class="sub-group-header">CYOA (Select ONE)</div>
                        <div class="option-grid" id="stuff-cyoa"></div>

                        <!-- Hidden Blocks (Multi) -->
                        <div class="sub-group-header">–°–ö–†–´–¢–´–ï –ë–õ–û–ö–ò (Multi-Select)</div>
                        <div class="option-grid" id="stuff-hidden"></div>

                        <!-- Fancy UI (1 var) -->
                        <div class="sub-group-header">FANCY UI (Select ONE)</div>
                        <div class="option-grid" id="stuff-ui"></div>

                        <!-- Comments (1 var) -->
                        <div class="sub-group-header">–ö–û–ú–ú–ï–ù–¢–ê–†–ò–ò (Select ONE)</div>
                        <div class="option-grid" id="stuff-comments"></div>

                        <!-- Chronicles (1 var) -->
                        <div class="sub-group-header">–•–†–û–ù–ò–ö–ò (Select ONE)</div>
                        <div class="option-grid" id="stuff-chronicles"></div>

                    </div> <!-- End Template Container -->

                    <!-- HTML THEME -->
                    <div class="control-group" style="margin-top: 30px;">
                        <span class="group-label">üåó –¢–µ–º–∞ HTML (–í—ã–±–µ—Ä–∏ 1)</span>
                        <div class="option-grid" id="theme-options">
                            <!-- JS -->
                        </div>
                    </div>

                </div>
            </section>

            <!-- 5. THINKING -->
            <section class="builder-section">
                <div class="sec-header">
                    <span class="sec-num">05</span>
                    <h3>–î–£–ú–ê–õ–ö–ê <span class="mono">// CoT</span></h3>
                </div>
                <div class="sec-content">
                     <div class="opt-box">
                        <span class="opt-title">Thinking Process</span>
                        <span class="opt-desc">–õ–æ–≥–∏–∫–∞ –º—ã—à–ª–µ–Ω–∏—è –º–æ–¥–µ–ª–∏. –ë–µ–∑ –≤–∞—Ä–∏–∞—Ü–∏–π.</span>
                    </div>
                </div>
            </section>

            <!-- 6. PREFILL -->
            <section class="builder-section">
                <div class="sec-header">
                    <span class="sec-num">06</span>
                    <h3>PREFILL <span class="mono">// –°—Ç–∞—Ä—Ç–æ–≤—ã–π –ø–∏–Ω–æ–∫</span></h3>
                </div>
                <div class="sec-content">
                     <div class="opt-box">
                        <span class="opt-title">Assistant Prefill</span>
                        <span class="opt-desc">–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞—á–∞–ª–æ –æ—Ç–≤–µ—Ç–∞. –ë–µ–∑ –≤–∞—Ä–∏–∞—Ü–∏–π.</span>
                    </div>
                </div>
            </section>

        </main>
    </div>

    <!-- LIGHTBOX -->
    <div class="lightbox" id="lb">
        <div class="lb-content">
            <button class="lb-close" onclick="closeLb()">√ó</button>
            <h3 id="lb-title" class="accent-mint">Title</h3>
            <img src="" id="lb-img" class="lb-img" alt="Preview">
            <p id="lb-desc" class="mono">Description</p>
            <hr style="border-color: #333; margin: 20px 0;">
            <pre class="mono" style="background: #000; padding: 10px; color: var(--mint); overflow-x: scroll;" id="lb-text"></pre>
        </div>
    </div>

    <script>
        // --- CONFIG DATA ---
        // –í–ê–ñ–ù–û: –ó–∞–ø–æ–ª–Ω–∏ [placeholder] —Å–≤–æ–∏–º —Ç–µ–∫—Å—Ç–æ–º!

        const DB = {
            main: {
                writing: [
                    { id: 'w1', name: '–°—Ç–∞–Ω–¥–∞—Ä—Ç', desc: '–û–±—ã—á–Ω—ã–π —Ä–µ–∂–∏–º', text: `[placeholder] Writing Mode 1`, img: '' },
                    { id: 'w2', name: '–ù–æ–≤–µ–ª–ª–∞', desc: '–ë–æ–ª–µ–µ –ª–∏—Ç–µ—Ä–∞—Ç—É—Ä–Ω–æ', text: `[placeholder] Writing Mode 2`, img: '' },
                    { id: 'w3', name: '–ß–∞—Ç', desc: '–ö–æ—Ä–æ—Ç–∫–∏–µ –æ—Ç–≤–µ—Ç—ã', text: `[placeholder] Writing Mode 3`, img: '' }
                ],
                bans: [
                    { id: 'b1', name: 'Soft Ban', desc: '–ú—è–≥–∫–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è', text: `[placeholder] Bans 1` },
                    { id: 'b2', name: 'Hard Ban', desc: '–°—Ç—Ä–æ–≥–∏–µ –∑–∞–ø—Ä–µ—Ç—ã', text: `[placeholder] Bans 2` },
                    { id: 'b3', name: 'No Ban', desc: '–ë–µ–∑ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π', text: `[placeholder] Bans 3` }
                ],
                lang: [
                    { id: 'l1', name: '–†—É—Å—Å–∫–∏–π', text: `[placeholder] RU` },
                    { id: 'l2', name: 'English', text: `[placeholder] EN` },
                    { id: 'l3', name: '–°—É—Ä–∂–∏–∫', text: `[placeholder] Mix` }
                ],
                style: [
                    { id: 's1', name: 'Liu Zhenyun', text: `[placeholder] Style 1` },
                    { id: 's2', name: 'Poetic', text: `[placeholder] Style 2` },
                    { id: 's3', name: 'Dry', text: `[placeholder] Style 3` },
                    { id: 's4', name: 'Modern', text: `[placeholder] Style 4` },
                    { id: 's5', name: 'Gothic', text: `[placeholder] Style 5` },
                    { id: 's6', name: 'Cyber', text: `[placeholder] Style 6` }
                ],
                pacing: [
                    { id: 'p1', name: 'Slow Burn', text: `[placeholder] Slow` },
                    { id: 'p2', name: 'Fast Paced', text: `[placeholder] Fast` }
                ],
                length: [
                    { id: 'len1', name: 'Short', text: `[placeholder] Short` },
                    { id: 'len2', name: 'Medium', text: `[placeholder] Med` },
                    { id: 'len3', name: 'Long', text: `[placeholder] Long` },
                    { id: 'len4', name: 'Epic', text: `[placeholder] Epic` },
                    { id: 'len5', name: 'Variable', text: `[placeholder] Var` }
                ]
            },
            extra: {
                html: [
                    { id: 'h1', name: 'Full HTML', text: `[placeholder] HTML Full` },
                    { id: 'h2', name: 'Lite HTML', text: `[placeholder] HTML Lite` }
                ],
                theme: [
                    { id: 't1', name: 'Dark Void', text: `[placeholder] Dark Theme` },
                    { id: 't2', name: 'Retro Terminal', text: `[placeholder] Retro Theme` }
                ],
                // STUFF CONTAINER ITEMS
                stuff: {
                    simple: Array.from({length:8}, (_,i) => ({id: `ss${i}`, name: `–ú–æ–¥—É–ª—å ${i+1}`, text: `[placeholder] Simple ${i}`})),
                    info: Array.from({length:5}, (_,i) => ({id: `si${i}`, name: `–ò–Ω—Ñ–æ–±–ª–æ–∫ ${i+1}`, text: `[placeholder] Info ${i}`})),
                    settings: [
                        {id: 'st1', name: 'Config A', text: '...'}, {id: 'st2', name: 'Config B', text: '...'}
                    ],
                    cyoa: [
                        {id: 'cy1', name: 'CYOA Classic', text: '...'}, {id: 'cy2', name: 'CYOA Visual', text: '...'}
                    ],
                    hidden: Array.from({length:4}, (_,i) => ({id: `hd${i}`, name: `–°–∫—Ä—ã—Ç—ã–π ${i+1}`, text: `[placeholder] Hidden ${i}`})),
                    ui: [
                        {id: 'ui1', name: 'HUD', text: '...'}, {id: 'ui2', name: 'Minimal', text: '...'}, {id: 'ui3', name: 'Glass', text: '...'}
                    ],
                    comments: [
                        {id: 'cm1', name: 'Funny', text: '...'}, {id: 'cm2', name: 'Helpful', text: '...'}, {id: 'cm3', name: 'Silent', text: '...'}
                    ],
                    chronicles: [
                        {id: 'cr1', name: 'Log V1', text: '...'}, {id: 'cr2', name: 'Log V2', text: '...'}
                    ]
                }
            }
        };

        // --- RENDER FUNCTIONS ---

        function createOption(item, type, groupName, containerId) {
            const container = document.getElementById(containerId);
            const label = document.createElement('label');
            label.className = 'cyber-option';

            // For Radio buttons, check the first one by default
            const isChecked = type === 'radio' && !container.hasChildNodes();

            label.innerHTML = `
                <input type="${type}" name="${groupName}" value="${item.id}" ${isChecked ? 'checked' : ''} data-text="${encodeURIComponent(item.text)}">
                <div class="opt-box">
                    <span class="opt-title">${item.name} <i class="fa-regular fa-eye" style="float:right; opacity:0.5;" onclick="preview('${item.id}', '${type}')"></i></span>
                    ${item.desc ? `<span class="opt-desc">${item.desc}</span>` : ''}
                </div>
            `;

            // Event listener for counting/updating
            label.querySelector('input').addEventListener('change', updateCount);

            container.appendChild(label);
        }

        function init() {
            // Render Main Section
            const mainContainer = document.getElementById('block-main');

            const mainCategories = [
                { key: 'writing', label: 'üåæ –†–µ–∂–∏–º –ü–∏—Å—å–º–∞ (1 –≤–∞—Ä)', type: 'radio' },
                { key: 'bans', label: '‚ùå –ë–∞–Ω—ã (1 –≤–∞—Ä)', type: 'radio' },
                { key: 'lang', label: 'üåê –Ø–∑—ã–∫ (1 –≤–∞—Ä)', type: 'radio' },
                { key: 'style', label: 'üìì –õ–∏—Ç. –°—Ç–∏–ª—å (1 –≤–∞—Ä)', type: 'radio' },
                { key: 'pacing', label: 'üå± –¢–µ–º–ø (1 –≤–∞—Ä)', type: 'radio' },
                { key: 'length', label: 'üìè –î–ª–∏–Ω–∞ (1 –≤–∞—Ä)', type: 'radio' }
            ];

            mainCategories.forEach(cat => {
                const groupDiv = document.createElement('div');
                groupDiv.className = 'control-group';
                groupDiv.innerHTML = `<span class="group-label">${cat.label}</span><div class="option-grid" id="main-${cat.key}"></div>`;
                mainContainer.appendChild(groupDiv);

                DB.main[cat.key].forEach(item => createOption(item, cat.type, `main_${cat.key}`, `main-${cat.key}`));
            });

            // Render Extra HTML & Theme
            DB.extra.html.forEach(item => createOption(item, 'radio', 'extra_html', 'html-options'));
            DB.extra.theme.forEach(item => createOption(item, 'radio', 'extra_theme', 'theme-options'));

            // Render Stuff Container
            const S = DB.extra.stuff;
            S.simple.forEach(item => createOption(item, 'checkbox', 'stuff_simple', 'stuff-simple'));
            S.info.forEach(item => createOption(item, 'radio', 'stuff_info', 'stuff-info'));
            S.settings.forEach(item => createOption(item, 'radio', 'stuff_settings', 'stuff-settings'));
            S.cyoa.forEach(item => createOption(item, 'radio', 'stuff_cyoa', 'stuff-cyoa'));
            S.hidden.forEach(item => createOption(item, 'checkbox', 'stuff_hidden', 'stuff-hidden'));
            S.ui.forEach(item => createOption(item, 'radio', 'stuff_ui', 'stuff-ui'));
            S.comments.forEach(item => createOption(item, 'radio', 'stuff_comments', 'stuff-comments'));
            S.chronicles.forEach(item => createOption(item, 'radio', 'stuff_chronicles', 'stuff-chronicles'));

            updateCount();
        }

        // --- UTILS ---
        function updateCount() {
            const inputs = document.querySelectorAll('input:checked:not([disabled])');
            document.getElementById('count-total').innerText = inputs.length;
        }

        function preview(id, type) {
            event.preventDefault(); // Stop label click
            // Find data in DB (Quick search approach)
            let item = null;
            // Recursively search DB object
            const findDeep = (obj) => {
                for (let k in obj) {
                    if (Array.isArray(obj[k])) {
                        const found = obj[k].find(x => x.id === id);
                        if(found) return found;
                    } else if (typeof obj[k] === 'object') {
                        const found = findDeep(obj[k]);
                        if(found) return found;
                    }
                }
            };
            item = findDeep(DB);

            if(item) {
                document.getElementById('lb-title').innerText = item.name;
                document.getElementById('lb-desc').innerText = item.desc || "No description";
                document.getElementById('lb-text').innerText = item.text;
                document.getElementById('lb-img').src = item.img || `https://via.placeholder.com/600x300/1a1a1e/69f0ae?text=${item.name}`;
                document.getElementById('lb').classList.add('active');
            }
        }

        function closeLb() { document.getElementById('lb').classList.remove('active'); }

        function assemblePreset() {
            let finalOutput = "";
            const inputs = document.querySelectorAll('input:checked');

            finalOutput += "=== RENETTE PRESET BUILD ===\n\n";

            inputs.forEach(input => {
                const text = decodeURIComponent(input.getAttribute('data-text') || "");
                if(text && text !== "undefined") {
                    finalOutput += text + "\n\n";
                }
            });

            navigator.clipboard.writeText(finalOutput).then(() => {
                const btn = document.querySelector('.btn-action');
                const orig = btn.innerHTML;
                btn.innerHTML = "–°–ö–û–ü–ò–†–û–í–ê–ù–û! (‚óï‚Äø‚óï)";
                setTimeout(() => btn.innerHTML = orig, 2000);
            });
        }

        // --- INTERACTIVE BG ---
        const canvas = document.getElementById('interactive-bg');
        const ctx = canvas.getContext('2d');
        let w, h;
        const particles = [];

        function resize() { w = canvas.width = window.innerWidth; h = canvas.height = window.innerHeight; }

        class P {
            constructor() {
                this.x = Math.random() * w; this.y = Math.random() * h;
                this.vx = (Math.random() - 0.5) * 0.5; this.vy = (Math.random() - 0.5) * 0.5;
                this.size = Math.random() * 2;
                this.color = Math.random() > 0.5 ? '#69f0ae' : '#e040fb';
            }
            update() {
                this.x += this.vx; this.y += this.vy;
                if(this.x < 0) this.x = w; if(this.x > w) this.x = 0;
                if(this.y < 0) this.y = h; if(this.y > h) this.y = 0;
            }
            draw() {
                ctx.fillStyle = this.color;
                ctx.globalAlpha = 0.3;
                ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI*2); ctx.fill();
            }
        }

        for(let i=0; i<50; i++) particles.push(new P());

        function animate() {
            ctx.clearRect(0,0,w,h);
            particles.forEach(p => { p.update(); p.draw(); });
            // Draw connecting lines
            ctx.strokeStyle = "rgba(105, 240, 174, 0.05)";
            for(let i=0; i<particles.length; i++) {
                for(let j=i; j<particles.length; j++) {
                    const dx = particles[i].x - particles[j].x;
                    const dy = particles[i].y - particles[j].y;
                    if (Math.hypot(dx,dy) < 100) {
                        ctx.beginPath(); ctx.moveTo(particles[i].x, particles[i].y); ctx.lineTo(particles[j].x, particles[j].y); ctx.stroke();
                    }
                }
            }
            requestAnimationFrame(animate);
        }

        window.addEventListener('resize', resize);
        resize();
        animate();
        init();

    </script>
</body>
</html>
