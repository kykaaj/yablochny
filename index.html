<!DOCTYPE html>
<html lang="ru">
<head>
  <meta name="google-site-verification" content="L1aS8txxzlMjDV_Efl0Oi1WDR0J7_DCdyazGjG1zVPk" />
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Яблочный Пресет — Renette</title>
  <link rel="icon" type="image/png" href="favicon.png" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Manrope:wght@300;500;700;800&family=Unbounded:wght@400;600;800&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg0:#0b1218;
      --bg1:#0f1a23;
      --panel: rgba(255,255,255,.06);
      --panel2: rgba(255,255,255,.04);
      --stroke: rgba(255,255,255,.10);
      --stroke2: rgba(255,255,255,.07);

      --mint:#7CFFD5;
      --red:#FF6B7A;
      --cyan:#58B8FF;
      --blue:#7A6CFF;

      --text:#EAF3FF;
      --muted: rgba(234,243,255,.72);

      --shadow: 0 18px 60px rgba(0,0,0,.45);
      --glow-m: 0 0 24px rgba(124,255,213,.16);
      --glow-r: 0 0 24px rgba(255,107,122,.14);
      --glow-c: 0 0 26px rgba(88,184,255,.16);

      --r: 22px;
      --r2: 16px;

      --max: 1200px;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: "Manrope", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color:var(--text);
      background:
        radial-gradient(1200px 800px at 20% 10%, rgba(124,255,213,.12), transparent 60%),
        radial-gradient(900px 700px at 85% 20%, rgba(88,184,255,.14), transparent 60%),
        radial-gradient(900px 700px at 55% 95%, rgba(255,107,122,.12), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
      overflow-x:hidden;
      -webkit-font-smoothing: antialiased;
      text-rendering: geometricPrecision;
    }
    a{color:inherit}
    button{font-family:inherit}

    /* Reduced motion */
    @media (prefers-reduced-motion: reduce){
      *{animation:none!important; transition:none!important; scroll-behavior:auto!important}
    }

    /* === Ambient layers === */
    #fx{
      position:fixed; inset:0; pointer-events:none; z-index:0;
    }
    #fx canvas{position:absolute; inset:0; width:100%; height:100%}
    #grain{
      position:fixed; inset:0; pointer-events:none; z-index:1;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='180' height='180'%3E%3Cfilter id='n'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='.9' numOctaves='2' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='180' height='180' filter='url(%23n)' opacity='.22'/%3E%3C/svg%3E");
      mix-blend-mode:overlay;
      opacity:.14;
    }
    #spot{
      position:fixed; inset:0; pointer-events:none; z-index:2;
      background: radial-gradient(700px circle at var(--mx,50%) var(--my,35%), rgba(124,255,213,.10), transparent 55%);
      transition: background .1s linear;
      mix-blend-mode:screen;
      opacity:.9;
    }

    /* === Layout === */
    .app{
      position:relative;
      z-index:3;
      min-height:100vh;
      display:flex;
      flex-direction:column;
    }
    .topbar{
      position:sticky;
      top:0;
      z-index:50;
      backdrop-filter: blur(14px);
      -webkit-backdrop-filter: blur(14px);
      background: linear-gradient(180deg, rgba(15,26,35,.85), rgba(15,26,35,.45));
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    .topbar-inner{
      max-width:var(--max);
      margin:0 auto;
      padding: 14px 14px;
      display:flex;
      gap:12px;
      align-items:center;
      justify-content:space-between;
    }

    .brand{
      display:flex;
      gap:12px;
      align-items:center;
      min-width:0;
    }
    .brand-badge{
      width:42px; height:42px;
      border-radius:14px;
      background:
        radial-gradient(12px 12px at 30% 30%, rgba(255,255,255,.45), transparent 55%),
        linear-gradient(135deg, rgba(124,255,213,.22), rgba(88,184,255,.22));
      border:1px solid rgba(255,255,255,.12);
      box-shadow: var(--glow-c), var(--glow-m);
      position:relative;
      overflow:hidden;
      flex: 0 0 auto;
    }
    .brand-badge::after{
      content:"";
      position:absolute; inset:-40%;
      background: conic-gradient(from 90deg, transparent, rgba(255,255,255,.25), transparent);
      animation: spin 8s linear infinite;
      opacity:.8;
    }
    @keyframes spin{to{transform:rotate(360deg)}}
    .brand-title{
      min-width:0;
      display:flex;
      flex-direction:column;
      align-items:flex-start;
      line-height:1.05;
    }
    .brand-title b{
      font-family:"Unbounded", system-ui;
      font-weight:800;
      letter-spacing:.3px;
      font-size: 14px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 44vw;
    }
    .brand-title span{
      color:var(--muted);
      font-size:12px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 44vw;
    }

    .top-actions{
      display:flex;
      gap:10px;
      align-items:center;
      flex:0 0 auto;
    }

    .pill{
      display:inline-flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius: 999px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      cursor:pointer;
      user-select:none;
      transition: transform .15s ease, background .2s ease, border-color .2s ease;
      color: rgba(234,243,255,.92);
      font-weight:700;
      font-size: 12.5px;
    }
    .pill:hover{transform: translateY(-1px); background: rgba(255,255,255,.085); border-color: rgba(255,255,255,.16)}
    .pill:active{transform: translateY(0px) scale(.98)}
    .pill .dot{
      width:10px; height:10px; border-radius:50%;
      background: var(--mint);
      box-shadow: 0 0 18px rgba(124,255,213,.45);
    }
    .pill.secondary .dot{background:var(--red); box-shadow:0 0 18px rgba(255,107,122,.42)}
    .pill.ghost{
      background: transparent;
      border: 1px solid rgba(255,255,255,.10);
    }

    /* Hero / cover */
    .hero{
      max-width: var(--max);
      margin: 0 auto;
      padding: 18px 14px 10px;
      display:grid;
      grid-template-columns: 1.15fr .85fr;
      gap:14px;
      align-items:stretch;
    }
    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      border:1px solid rgba(255,255,255,.10);
      border-radius: var(--r);
      box-shadow: var(--shadow);
      position:relative;
      overflow:hidden;
    }
    .card::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(900px 500px at 20% 10%, rgba(124,255,213,.20), transparent 60%),
                  radial-gradient(700px 450px at 90% 30%, rgba(88,184,255,.20), transparent 60%),
                  radial-gradient(700px 450px at 50% 110%, rgba(255,107,122,.16), transparent 60%);
      opacity:.55;
      pointer-events:none;
    }
    .hero-main{
      padding: 18px 18px 18px;
      display:flex;
      flex-direction:column;
      gap: 14px;
      min-height: 220px;
    }
    .hero-kicker{
      display:flex;
      flex-wrap:wrap;
      gap:8px;
      align-items:center;
      position:relative;
      z-index:2;
    }
    .chip{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 8px 10px;
      border-radius: 999px;
      background: rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.10);
      color: rgba(234,243,255,.85);
      font-weight:700;
      font-size: 12px;
    }
    .chip i{
      width:10px;height:10px;border-radius:50%;
      background: var(--cyan);
      box-shadow: var(--glow-c);
      display:inline-block;
    }
    .chip.red i{background: var(--red); box-shadow: var(--glow-r)}
    .chip.mint i{background: var(--mint); box-shadow: var(--glow-m)}
    .hero-title{
      position:relative;
      z-index:2;
      margin:0;
      font-family:"Unbounded", system-ui;
      font-weight:800;
      font-size: clamp(22px, 3.6vw, 42px);
      line-height: 1.06;
      letter-spacing: .2px;
    }
    .hero-title .grad{
      background: linear-gradient(90deg, var(--mint), var(--cyan), var(--red));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      filter: drop-shadow(0 12px 32px rgba(0,0,0,.4));
    }
    .hero-sub{
      position:relative;
      z-index:2;
      margin:0;
      color: var(--muted);
      font-weight:600;
      line-height: 1.65;
      font-size: 14px;
      max-width: 70ch;
    }
    .hero-cta{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      position:relative;
      z-index:2;
      margin-top:auto;
    }
    .btn{
      border:0;
      cursor:pointer;
      user-select:none;
      border-radius: 16px;
      padding: 12px 14px;
      font-weight: 900;
      letter-spacing:.4px;
      color:#081017;
      background: linear-gradient(135deg, var(--mint), var(--cyan), var(--red));
      box-shadow: 0 18px 50px rgba(124,255,213,.18);
      position:relative;
      overflow:hidden;
      transition: transform .18s ease, filter .2s ease;
      display:inline-flex;
      align-items:center;
      gap:10px;
    }
    .btn:hover{transform: translateY(-2px); filter:saturate(1.08) contrast(1.05)}
    .btn:active{transform: translateY(0px) scale(.98)}
    .btn::after{
      content:"";
      position:absolute; left:-70%; top:-30%;
      width:55%; height:160%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.75), transparent);
      transform: skewX(-20deg);
      opacity:.0;
    }
    .btn:hover::after{animation: shine .75s ease}
    @keyframes shine{
      0%{left:-70%; opacity:0}
      35%{opacity:.8}
      100%{left:140%; opacity:0}
    }

    .btn-ghost{
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.12);
      color: rgba(234,243,255,.92);
      box-shadow: none;
    }

    /* Renette / cover */
    .hero-side{
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap:12px;
      min-height: 220px;
      position:relative;
    }
    .cover{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(400px 220px at 35% 30%, rgba(124,255,213,.12), transparent 60%),
        radial-gradient(320px 220px at 80% 20%, rgba(88,184,255,.14), transparent 60%),
        rgba(0,0,0,.18);
      overflow:hidden;
      position:relative;
      flex:1;
      min-height: 180px;
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:12px;
      padding: 14px;
    }
    .cover img{
      width:100%;
      height:100%;
      object-fit:cover;
      position:absolute;
      inset:0;
      opacity:.85;
      filter: contrast(1.05) saturate(1.05) brightness(.95);
      transform: scale(1.02);
    }
    .cover::after{
      content:"";
      position:absolute; inset:0;
      background: linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.72));
      pointer-events:none;
    }
    .cover-meta{
      position:relative;
      z-index:2;
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .sig{
      font-family:"Unbounded";
      font-weight:700;
      font-size: 14px;
      letter-spacing:.3px;
    }
    .sig small{
      display:block;
      font-family:"Manrope";
      font-weight:700;
      color: rgba(234,243,255,.7);
      margin-top:2px;
      letter-spacing:.2px;
    }
    .renette-toggle{
      position:relative;
      z-index:2;
      display:flex;
      align-items:center;
      gap:10px;
      padding: 10px 12px;
      border-radius: 999px;
      background: rgba(15,26,35,.45);
      border:1px solid rgba(255,255,255,.12);
      cursor:pointer;
      user-select:none;
      transition: background .2s ease, transform .15s ease;
      font-weight:900;
      letter-spacing:.25px;
      color: rgba(234,243,255,.9);
      white-space:nowrap;
    }
    .renette-toggle:hover{background: rgba(15,26,35,.62); transform: translateY(-1px)}
    .renette-eye{
      width:11px;height:11px;border-radius:50%;
      background: var(--mint);
      box-shadow: 0 0 18px rgba(124,255,213,.55);
      position:relative;
    }
    .renette-eye::after{
      content:"";
      position:absolute; inset:-5px;
      border-radius:50%;
      border:1px solid rgba(124,255,213,.20);
      opacity:.6;
      animation: pulse 2.6s ease-in-out infinite;
    }
    @keyframes pulse{
      0%,100%{transform:scale(.9); opacity:.25}
      50%{transform:scale(1.25); opacity:.65}
    }

    /* Main sections / navigation */
    .shell{
      max-width: var(--max);
      margin: 0 auto;
      padding: 12px 14px 80px;
      display:grid;
      grid-template-columns: 320px 1fr;
      gap: 14px;
      align-items:start;
    }

    .dock{
      position: sticky;
      top: 74px;
      align-self:start;
      padding: 12px;
    }

    .nav{
      display:flex;
      flex-direction:column;
      gap:10px;
      position:relative;
      z-index:2;
    }
    .nav .navbtn{
      width:100%;
      padding: 14px 14px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.05);
      color: rgba(234,243,255,.88);
      font-weight: 900;
      letter-spacing: .35px;
      cursor:pointer;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      transition: transform .15s ease, background .2s ease, border-color .2s ease;
      position:relative;
      overflow:hidden;
    }
    .navbtn:hover{transform: translateY(-1px); background: rgba(255,255,255,.07); border-color: rgba(255,255,255,.14)}
    .navbtn:active{transform: translateY(0px) scale(.99)}
    .navbtn .left{
      display:flex; align-items:center; gap:10px; min-width:0;
    }
    .navbtn .ico{
      width:36px;height:36px;border-radius: 14px;
      background: rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.10);
      display:grid; place-items:center;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      flex:0 0 auto;
    }
    .navbtn .ico b{
      font-family:"Unbounded";
      font-weight:800;
      font-size: 13px;
      background: linear-gradient(90deg, var(--mint), var(--cyan), var(--red));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
    }
    .navbtn .label{
      text-align:left;
      line-height:1.1;
      min-width:0;
    }
    .navbtn .label span{display:block; font-size:13px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis}
    .navbtn .label small{display:block; margin-top:4px; font-size:12px; color: rgba(234,243,255,.62); font-weight:700}
    .navbtn .hint{
      font-weight:900;
      color: rgba(234,243,255,.55);
      flex:0 0 auto;
    }
    .navbtn.active{
      background: linear-gradient(90deg, rgba(124,255,213,.14), rgba(88,184,255,.12), rgba(255,107,122,.10));
      border-color: rgba(124,255,213,.38);
      box-shadow: var(--glow-m);
      color: #fff;
    }
    .navbtn.active .hint{color: rgba(234,243,255,.8)}
    .navbtn::after{
      content:"";
      position:absolute; left:-60%; top:-30%;
      width:50%; height:160%;
      background: linear-gradient(90deg, transparent, rgba(255,255,255,.35), transparent);
      transform: skewX(-22deg);
      opacity:0;
    }
    .navbtn:hover::after{animation: shine .75s ease}
    .mini{
      margin-top:10px;
      display:grid;
      grid-template-columns: 1fr;
      gap:10px;
    }
    .mini .note{
      padding: 12px 12px;
      border-radius: 16px;
      border:1px dashed rgba(255,255,255,.16);
      background: rgba(0,0,0,.16);
      color: rgba(234,243,255,.72);
      line-height: 1.6;
      font-weight:700;
      font-size: 12.5px;
    }
    .note b{color: rgba(234,243,255,.92)}
    .note .accent{color: var(--mint); font-weight:900}

    /* Content panels */
    .stage{
      display:flex;
      flex-direction:column;
      gap: 14px;
      min-width:0;
    }
    .panel{
      padding: 18px;
    }
    .panel h2{
      margin:0 0 10px 0;
      font-family:"Unbounded";
      font-weight:800;
      letter-spacing:.2px;
      font-size: clamp(18px, 2.2vw, 26px);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
      position:relative;
      z-index:2;
    }
    .panel h2 .tag{
      font-family:"Manrope";
      font-weight:900;
      font-size:12px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(0,0,0,.18);
      color: rgba(234,243,255,.82);
      white-space:nowrap;
    }
    .panel p{margin:0 0 12px 0; color: var(--muted); line-height: 1.75; font-weight:600; position:relative; z-index:2}

    .hr{
      height:1px;
      background: linear-gradient(90deg, transparent, rgba(124,255,213,.25), rgba(88,184,255,.20), rgba(255,107,122,.18), transparent);
      opacity:.8;
      margin: 12px 0 14px;
      position:relative;
      z-index:2;
    }

    .grid2{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      position:relative; z-index:2;
    }
    .kpi{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.16);
      padding: 14px;
      min-height: 92px;
      position:relative;
      overflow:hidden;
    }
    .kpi::before{
      content:"";
      position:absolute; inset:-2px;
      background: radial-gradient(260px 160px at 25% 25%, rgba(124,255,213,.14), transparent 60%),
                  radial-gradient(240px 160px at 85% 35%, rgba(88,184,255,.14), transparent 60%);
      opacity:.7;
      pointer-events:none;
    }
    .kpi b{position:relative; z-index:2; display:block; font-family:"Unbounded"; font-weight:800; font-size: 13px; letter-spacing:.2px}
    .kpi span{position:relative; z-index:2; display:block; margin-top:8px; color: rgba(234,243,255,.72); font-weight:650; font-size: 13px; line-height:1.6}

    /* Download */
    .downloadRow{
      display:flex;
      flex-wrap:wrap;
      gap:10px;
      align-items:center;
      position:relative;
      z-index:2;
    }

    /* Changelog */
    .scrollbox{
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.16);
      overflow:hidden;
      position:relative;
      z-index:2;
    }
    .scrollbox header{
      position:sticky;
      top:0;
      z-index:3;
      padding: 12px 14px;
      background: rgba(15,26,35,.88);
      backdrop-filter: blur(12px);
      border-bottom:1px solid rgba(255,255,255,.08);
      display:flex; align-items:center; justify-content:space-between; gap:10px;
    }
    .scrollbox header b{
      font-family:"Unbounded";
      font-size: 13px;
      letter-spacing:.2px;
    }
    .scrollbox header .pills{
      display:flex; gap:8px; flex-wrap:wrap;
      font-size:12px; color: rgba(234,243,255,.7); font-weight:800;
    }
    .log{
      max-height: 420px;
      overflow:auto;
      padding: 14px;
    }
    .entry{
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      padding: 12px;
      margin-bottom: 12px;
    }
    .entry:last-child{margin-bottom:0}
    .entry .head{
      display:flex; align-items:baseline; justify-content:space-between; gap:10px; flex-wrap:wrap;
      margin-bottom: 8px;
    }
    .vtag{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 6px 10px;
      border-radius: 999px;
      background: rgba(124,255,213,.10);
      border:1px solid rgba(124,255,213,.22);
      color: var(--mint);
      font-weight: 900;
      font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    }
    .date{
      color: rgba(234,243,255,.55);
      font-weight: 800;
      font-size: 12px;
    }
    .entry ul{
      margin: 8px 0 0 0;
      padding-left: 18px;
      color: rgba(234,243,255,.78);
      line-height: 1.6;
      font-weight: 650;
      font-size: 13px;
    }
    .entry li{margin: 6px 0}

    /* === PROMPTS (new architecture) === */
    .promptsTop{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      align-items:flex-start;
      justify-content:space-between;
      position:relative; z-index:2;
    }
    .search{
      flex:1 1 260px;
      display:flex;
      gap:10px;
      align-items:center;
      padding: 12px 12px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      min-width: 220px;
    }
    .search input{
      width:100%;
      border:0;
      outline:0;
      background: transparent;
      color: rgba(234,243,255,.92);
      font-weight: 800;
      letter-spacing:.2px;
    }
    .search input::placeholder{color: rgba(234,243,255,.45); font-weight:800}
    .search .sigil{
      width:36px; height:36px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      background: radial-gradient(10px 10px at 30% 30%, rgba(255,255,255,.45), transparent 55%),
                  rgba(255,255,255,.04);
      display:grid; place-items:center;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      flex:0 0 auto;
      position:relative;
      overflow:hidden;
    }
    .search .sigil::after{
      content:"";
      position:absolute; inset:-40%;
      background: conic-gradient(from 180deg, transparent, rgba(124,255,213,.35), transparent, rgba(88,184,255,.25), transparent);
      animation: spin 10s linear infinite;
      opacity:.9;
    }
    .search .sigil b{
      position:relative;
      font-family:"Unbounded";
      z-index:2;
      font-size: 12px;
      color: rgba(234,243,255,.92);
    }

    .bulkbar{
      flex: 0 1 340px;
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:flex-end;
      flex-wrap:wrap;
    }
    .count{
      padding: 8px 10px;
      border-radius: 999px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      color: rgba(234,243,255,.74);
      font-weight: 900;
      font-size: 12px;
      white-space:nowrap;
    }

    .btnSmall{
      padding: 10px 12px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(234,243,255,.92);
      font-weight: 900;
      cursor:pointer;
      transition: transform .15s ease, background .2s ease, border-color .2s ease;
    }
    .btnSmall:hover{transform: translateY(-1px); background: rgba(255,255,255,.08); border-color: rgba(255,255,255,.18)}
    .btnSmall.primary{
      color:#081017;
      border:0;
      background: linear-gradient(135deg, rgba(124,255,213,.95), rgba(88,184,255,.92), rgba(255,107,122,.90));
      box-shadow: 0 16px 44px rgba(124,255,213,.16);
    }

    .promptGroups{
      display:flex;
      flex-direction:column;
      gap: 12px;
      position:relative; z-index:2;
      margin-top: 12px;
    }

    details.group{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.16);
      overflow:hidden;
    }
    details.group > summary{
      list-style:none;
      cursor:pointer;
      padding: 14px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      user-select:none;
      font-weight: 900;
      letter-spacing:.25px;
      position:relative;
      background: linear-gradient(90deg, rgba(124,255,213,.08), rgba(88,184,255,.06), rgba(255,107,122,.05));
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    details.group > summary::-webkit-details-marker{display:none}
    .gleft{
      display:flex; align-items:center; gap:10px; min-width:0;
    }
    .gnum{
      width:34px;height:34px;border-radius: 14px;
      display:grid; place-items:center;
      background: rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      font-family:"Unbounded";
      color: rgba(234,243,255,.88);
      flex: 0 0 auto;
    }
    .gtitle{
      min-width:0;
    }
    .gtitle span{
      display:block;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .gtitle small{
      display:block;
      color: rgba(234,243,255,.62);
      font-weight: 800;
      margin-top:4px;
      font-size: 12px;
    }
    .garrow{
      color: rgba(234,243,255,.55);
      font-weight: 900;
      transition: transform .2s ease, color .2s ease;
    }
    details.group[open] .garrow{
      transform: rotate(180deg);
      color: var(--mint);
    }

    .groupBody{
      padding: 14px;
      display:flex;
      flex-direction:column;
      gap: 14px;
    }

    .subhead{
      display:flex;
      align-items:baseline;
      justify-content:space-between;
      gap:12px;
      flex-wrap:wrap;
    }
    .subhead h4{
      margin:0;
      font-family:"Unbounded";
      font-weight:800;
      letter-spacing:.2px;
      font-size: 14px;
      color: rgba(234,243,255,.92);
    }
    .default{
      display:inline-flex;
      gap:8px;
      align-items:center;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,107,122,.08);
      color: rgba(234,243,255,.78);
      font-weight: 900;
      font-size: 12px;
    }
    .default b{color: var(--red)}
    .divider{
      height:1px;
      background: rgba(255,255,255,.08);
      margin: 4px 0 0;
    }

    .cards{
      display:grid;
      grid-template-columns: repeat(2, minmax(0, 1fr));
      gap: 10px;
    }

    .opt{
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      padding: 12px;
      display:flex;
      flex-direction:column;
      gap: 10px;
      position:relative;
      overflow:hidden;
      transition: transform .15s ease, border-color .2s ease, background .2s ease;
    }
    .opt:hover{
      transform: translateY(-1px);
      border-color: rgba(124,255,213,.18);
      background: rgba(255,255,255,.04);
    }
    .optTop{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap:10px;
    }
    .pick{
      display:flex;
      gap:10px;
      align-items:flex-start;
    }
    .pick input{
      margin:0;
      width:22px;
      height:22px;
      appearance:none;
      -webkit-appearance:none;
      border-radius: 8px;
      border: 2px solid rgba(124,255,213,.8);
      background: rgba(0,0,0,.25);
      cursor:pointer;
      position:relative;
      flex:0 0 auto;
      box-shadow: 0 0 0 0 rgba(124,255,213,.0);
      transition: box-shadow .2s ease, transform .15s ease, background .2s ease;
    }
    .pick input[type="radio"]{
      border-radius: 50%;
      border-color: rgba(255,107,122,.9);
    }
    .pick input:checked{
      background: rgba(124,255,213,.92);
      box-shadow: 0 0 18px rgba(124,255,213,.35);
    }
    .pick input[type="radio"]:checked{
      background: rgba(255,107,122,.92);
      box-shadow: 0 0 18px rgba(255,107,122,.30);
    }
    .pick input:checked::after{
      content:"";
      position:absolute; inset:0;
      margin:auto;
      width:10px;height:10px;
      border-radius:3px;
      background:#071018;
    }
    .pick input[type="radio"]:checked::after{
      width:10px;height:10px;border-radius:50%;
      background:#071018;
    }

    .optName{
      font-weight: 900;
      letter-spacing:.25px;
      line-height:1.25;
    }
    .optDesc{
      margin:0;
      color: rgba(234,243,255,.70);
      font-weight:700;
      font-size: 13px;
      line-height:1.6;
    }

    .optActions{
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:flex-end;
      flex-wrap:wrap;
    }
    .copyOne{
      padding: 10px 12px;
      border-radius: 14px;
      border:1px solid rgba(124,255,213,.55);
      background: rgba(124,255,213,.08);
      color: var(--mint);
      font-weight: 900;
      cursor:pointer;
      transition: transform .15s ease, background .2s ease;
    }
    .copyOne:hover{
      transform: translateY(-1px);
      background: rgba(124,255,213,.14);
    }
    .copyOne:active{transform: translateY(0px) scale(.99)}
    .opt details{
      border-radius: 14px;
      border: 1px dashed rgba(255,255,255,.14);
      background: rgba(0,0,0,.14);
      padding: 8px 10px;
    }
    .opt details > summary{
      list-style:none;
      cursor:pointer;
      user-select:none;
      color: rgba(124,255,213,.92);
      font-weight: 900;
      font-size: 12.5px;
    }
    .opt details > summary::-webkit-details-marker{display:none}
    .opt details[open] > summary{color: rgba(234,243,255,.92)}
    .preview{
      margin-top: 10px;
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .preview img{
      width:100%;
      height:auto;
      border-radius: 12px;
      border:1px solid rgba(255,255,255,.10);
      cursor: zoom-in;
    }

    /* Hidden prompt payloads */
    textarea.payload{
      position:absolute;
      left:-9999px;
      top:-9999px;
      opacity:0;
      pointer-events:none;
      height:1px;
      width:1px;
    }

    /* Guides */
    .guides{
      display:flex;
      flex-direction:column;
      gap: 12px;
      position:relative; z-index:2;
    }
    details.guide{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.16);
      overflow:hidden;
    }
    details.guide > summary{
      list-style:none;
      cursor:pointer;
      user-select:none;
      padding: 14px 14px;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      font-weight: 900;
      letter-spacing:.25px;
      background: linear-gradient(90deg, rgba(88,184,255,.07), rgba(124,255,213,.06), rgba(255,107,122,.05));
      border-bottom: 1px solid rgba(255,255,255,.08);
    }
    details.guide > summary::-webkit-details-marker{display:none}
    .gicon{
      width:34px;height:34px;border-radius: 14px;
      display:grid; place-items:center;
      background: rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.10);
      flex:0 0 auto;
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .guideBody{padding: 14px}
    .steps{
      display:flex;
      flex-direction:column;
      gap: 12px;
    }
    .step{
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      padding: 12px;
      display:grid;
      grid-template-columns: 56px 1fr;
      gap: 12px;
      align-items:start;
    }
    .badge{
      width:56px;height:56px;border-radius: 18px;
      display:grid; place-items:center;
      font-family:"Unbounded";
      font-weight:800;
      color:#081017;
      background: linear-gradient(135deg, rgba(124,255,213,.92), rgba(88,184,255,.86));
      box-shadow: 0 18px 40px rgba(88,184,255,.14);
    }
    .badge.red{
      background: linear-gradient(135deg, rgba(255,107,122,.92), rgba(124,255,213,.86));
      box-shadow: 0 18px 40px rgba(255,107,122,.14);
    }
    .step h4{
      margin:0 0 6px 0;
      font-weight: 900;
      letter-spacing:.15px;
      font-size: 14px;
    }
    .step p{
      margin:0;
      color: rgba(234,243,255,.72);
      font-weight: 650;
      line-height: 1.6;
      font-size: 13px;
    }
    .step img{
      width:100%;
      height:auto;
      margin-top: 10px;
      border-radius: 14px;
      border:1px solid rgba(255,255,255,.10);
      cursor: zoom-in;
    }

    /* Contacts */
    .links{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
      position:relative; z-index:2;
    }
    .link{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      padding: 14px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      text-decoration:none;
      transition: transform .15s ease, border-color .2s ease, background .2s ease;
    }
    .link:hover{
      transform: translateY(-1px);
      border-color: rgba(88,184,255,.22);
      background: rgba(255,255,255,.05);
    }
    .link .l{
      display:flex; align-items:center; gap:12px; min-width:0;
    }
    .icon{
      width:44px;height:44px;border-radius: 18px;
      display:grid; place-items:center;
      background: rgba(0,0,0,.22);
      border:1px solid rgba(255,255,255,.10);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
      flex:0 0 auto;
      overflow:hidden;
    }
    .icon img{width:22px;height:22px; object-fit:contain}
    .ltxt{min-width:0}
    .ltxt b{
      display:block;
      font-weight: 900;
      letter-spacing:.2px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .ltxt span{
      display:block;
      margin-top:4px;
      color: rgba(234,243,255,.62);
      font-weight: 800;
      font-size: 12px;
      white-space:nowrap;
      overflow:hidden;
      text-overflow:ellipsis;
    }
    .go{
      color: rgba(234,243,255,.6);
      font-weight: 900;
    }

    .credits{
      margin-top: 12px;
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
      position:relative; z-index:2;
    }
    .creditCard{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.16);
      padding: 14px;
      color: rgba(234,243,255,.80);
      font-weight: 650;
      line-height: 1.7;
      min-height: 92px;
      position:relative;
      overflow:hidden;
    }
    .creditCard h4{
      margin:0 0 8px 0;
      font-family:"Unbounded";
      font-weight:800;
      font-size: 14px;
      letter-spacing:.2px;
      color: rgba(234,243,255,.92);
    }
    .creditCard a{
      text-decoration:none;
      border-bottom: 1px dashed rgba(124,255,213,.45);
      color: rgba(234,243,255,.92);
      font-weight:900;
    }
    .thanks{
      margin-top: 10px;
      display:flex;
      flex-direction:column;
      gap:10px;
      position:relative; z-index:2;
    }
    .quote{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.03);
      padding: 14px;
      color: rgba(234,243,255,.78);
      font-weight: 650;
      line-height: 1.7;
    }
    .quote .heart{
      color: var(--mint);
      font-weight: 1000;
    }

    /* Toast */
    #toast{
      position: fixed;
      left: 14px;
      right: 14px;
      bottom: 14px;
      z-index: 1000;
      display:flex;
      flex-direction:column;
      gap:10px;
      pointer-events:none;
    }
    @media (min-width: 720px){
      #toast{left:auto; right: 14px; max-width: 420px}
    }
    .t{
      pointer-events:auto;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(15,26,35,.92);
      backdrop-filter: blur(12px);
      box-shadow: 0 18px 50px rgba(0,0,0,.5);
      padding: 12px 12px;
      display:flex;
      gap: 10px;
      align-items:flex-start;
      transform: translateY(20px);
      opacity:0;
      transition: transform .32s cubic-bezier(.2,.9,.2,1), opacity .32s ease;
    }
    .t.show{transform: translateY(0); opacity:1}
    .t .badge{
      width:42px;height:42px;border-radius: 16px;
      font-family:"Unbounded";
      background: linear-gradient(135deg, rgba(124,255,213,.88), rgba(88,184,255,.84), rgba(255,107,122,.82));
      box-shadow: 0 14px 34px rgba(124,255,213,.10);
      flex:0 0 auto;
    }
    .t .txt b{display:block; font-weight: 1000; letter-spacing:.2px}
    .t .txt span{display:block; margin-top:4px; color: rgba(234,243,255,.70); font-weight:700; line-height:1.5; font-size: 13px}

    /* Lightbox */
    #lightbox{
      position:fixed; inset:0;
      background: rgba(5,8,12,.92);
      z-index: 1200;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 20px;
      cursor: zoom-out;
    }
    #lightbox.show{display:flex}
    #lightbox img{
      max-width: min(980px, 92vw);
      max-height: 88vh;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 30px 90px rgba(0,0,0,.7);
    }
    #lightbox .x{
      position:absolute; top: 16px; right: 18px;
      width: 44px; height: 44px;
      border-radius: 16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      display:grid; place-items:center;
      color: rgba(234,243,255,.92);
      font-weight: 1000;
      cursor:pointer;
      user-select:none;
    }

    /* Scroll top */
    #up{
      position:fixed;
      right: 16px;
      bottom: 84px;
      width: 52px;
      height: 52px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(15,26,35,.76);
      backdrop-filter: blur(12px);
      display:grid;
      place-items:center;
      color: rgba(234,243,255,.90);
      cursor:pointer;
      user-select:none;
      box-shadow: 0 18px 50px rgba(0,0,0,.45);
      opacity:0;
      pointer-events:none;
      transition: opacity .25s ease, transform .2s ease;
      z-index: 999;
    }
    #up.show{opacity:1; pointer-events:auto}
    #up:hover{transform: translateY(-2px)}
    #up b{
      font-family:"Unbounded";
      background: linear-gradient(90deg, var(--mint), var(--cyan), var(--red));
      -webkit-background-clip:text;
      background-clip:text;
      color:transparent;
      font-size: 14px;
    }

    /* === Easter egg button (hidden but discoverable) === */
    .easter{
      position:fixed;
      left: 14px;
      bottom: 14px;
      z-index: 950;
      width: 56px;
      height: 56px;
      border-radius: 20px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(15,26,35,.76);
      backdrop-filter: blur(12px);
      display:grid;
      place-items:center;
      cursor:pointer;
      user-select:none;
      box-shadow: 0 18px 50px rgba(0,0,0,.45);
      transition: transform .15s ease, border-color .2s ease;
    }
    .easter:hover{transform: translateY(-2px); border-color: rgba(124,255,213,.22)}
    .easter .leaf{
      width: 18px; height: 18px;
      border-radius: 6px 14px 6px 14px;
      background: linear-gradient(135deg, rgba(124,255,213,.95), rgba(88,184,255,.85));
      transform: rotate(18deg);
      box-shadow: 0 0 18px rgba(124,255,213,.25);
      position:relative;
    }
    .easter .leaf::after{
      content:"";
      position:absolute; left: 2px; top: 3px;
      width: 12px; height: 10px;
      border-radius: 6px 14px 6px 14px;
      border:1px solid rgba(255,255,255,.18);
      opacity:.55;
    }

    /* === Game modal === */
    #gameModal{
      position:fixed; inset:0;
      z-index: 1300;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 16px;
      background: rgba(5,8,12,.76);
      backdrop-filter: blur(10px);
    }
    #gameModal.show{display:flex}
    .game{
      width: min(980px, 96vw);
      border-radius: 22px;
      border:1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.07), rgba(255,255,255,.04));
      box-shadow: 0 40px 120px rgba(0,0,0,.75);
      overflow:hidden;
      position:relative;
    }
    .gameHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 14px 14px;
      background: rgba(15,26,35,.86);
      border-bottom:1px solid rgba(255,255,255,.08);
    }
    .gameHead b{
      font-family:"Unbounded";
      letter-spacing:.2px;
      font-size: 14px;
    }
    .gameHead .close{
      width:44px;height:44px;border-radius: 16px;
      border:1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      display:grid; place-items:center;
      cursor:pointer;
      user-select:none;
      font-weight: 1000;
    }
    .gameBody{
      padding: 14px;
      display:grid;
      grid-template-columns: 1fr 340px;
      gap: 12px;
    }
    #orchard{
      width:100%;
      height: 460px;
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background:
        radial-gradient(520px 360px at 30% 25%, rgba(124,255,213,.10), transparent 60%),
        radial-gradient(480px 320px at 85% 25%, rgba(88,184,255,.10), transparent 60%),
        radial-gradient(520px 360px at 55% 105%, rgba(255,107,122,.09), transparent 60%),
        rgba(0,0,0,.18);
      overflow:hidden;
      position:relative;
      cursor: crosshair;
    }
    .hud{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .hud .box{
      border-radius: 18px;
      border:1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.16);
      padding: 12px;
      line-height:1.65;
      font-weight: 700;
      color: rgba(234,243,255,.78);
    }
    .hud .box b{
      display:block;
      color: rgba(234,243,255,.92);
      font-family:"Unbounded";
      letter-spacing:.2px;
      font-size: 13px;
      margin-bottom: 6px;
    }
    .hud .stat{
      display:flex; justify-content:space-between; gap:10px;
      font-weight: 900;
      margin-top: 8px;
    }
    .hud .stat span{color: rgba(234,243,255,.65)}
    .hud .stat i{font-style:normal; color: var(--mint)}
    .hud .stat i.red{color: var(--red)}
    .hud .stat i.cyan{color: var(--cyan)}
    .hud .controls{
      display:flex; gap:10px; flex-wrap:wrap; margin-top: 10px;
    }
    .hud .controls button{
      flex:1 1 auto;
    }

    .apple{
      position:absolute;
      width: 46px; height: 46px;
      border-radius: 18px;
      border: 1px solid rgba(255,255,255,.14);
      box-shadow: 0 18px 40px rgba(0,0,0,.35);
      display:grid;
      place-items:center;
      user-select:none;
      transform: translate(-50%, -50%);
      transition: transform .1s ease;
    }
    .apple::before{
      content:"";
      position:absolute;
      width: 10px; height: 18px;
      border-radius: 10px 10px 2px 2px;
      background: linear-gradient(180deg, rgba(255,255,255,.22), rgba(255,255,255,.08));
      top: -10px;
      left: 50%;
      transform: translateX(-50%);
      border: 1px solid rgba(255,255,255,.12);
    }
    .apple::after{
      content:"";
      position:absolute;
      width: 14px; height: 10px;
      border-radius: 4px 12px 4px 12px;
      background: linear-gradient(135deg, rgba(124,255,213,.95), rgba(88,184,255,.75));
      top: -14px;
      left: 55%;
      transform: rotate(25deg);
      box-shadow: 0 0 18px rgba(124,255,213,.22);
    }
    .apple b{
      font-family:"Unbounded";
      font-weight: 900;
      font-size: 13px;
      color: rgba(0,0,0,.72);
    }
    .apple.good{
      background: linear-gradient(135deg, rgba(124,255,213,.92), rgba(88,184,255,.85));
    }
    .apple.bad{
      background: linear-gradient(135deg, rgba(255,107,122,.92), rgba(122,108,255,.82));
    }
    .apple.good:hover{transform: translate(-50%,-50%) scale(1.03)}
    .apple.bad:hover{transform: translate(-50%,-50%) scale(1.03)}
    .apple.fade{
      animation: pop .22s ease forwards;
    }
    @keyframes pop{
      to{transform: translate(-50%,-50%) scale(.5); opacity:0}
    }

    /* Responsive */
    @media (max-width: 980px){
      .hero{grid-template-columns: 1fr; }
      .shell{grid-template-columns: 1fr; }
      .dock{position:relative; top:auto}
      .nav{display:grid; grid-template-columns: 1fr 1fr; }
      .navbtn{padding: 12px}
      .mini{grid-template-columns: 1fr}
      .cards{grid-template-columns: 1fr}
      .links{grid-template-columns: 1fr}
      .credits{grid-template-columns: 1fr}
      .gameBody{grid-template-columns: 1fr; }
      #orchard{height: 420px}
    }
    @media (max-width: 520px){
      .topbar-inner{padding: 12px}
      .brand-title b{max-width: 52vw}
      .hero{padding: 12px}
      .hero-main{min-height: 240px}
      .btn{width:100%; justify-content:center}
      .hero-cta{width:100%}
      .shell{padding-bottom: 110px}
      .nav{grid-template-columns: 1fr}
    }

    /* Hide / show stage sections */
    [data-view]{display:none}
    [data-view].active{display:block}

    /* Subtle selection */
    ::selection{background: rgba(124,255,213,.28); color: var(--text)}

    /* Scrollbars */
    ::-webkit-scrollbar{width: 8px}
    ::-webkit-scrollbar-track{background: rgba(0,0,0,.18)}
    ::-webkit-scrollbar-thumb{
      background: linear-gradient(180deg, rgba(124,255,213,.55), rgba(88,184,255,.55), rgba(255,107,122,.45));
      border-radius: 999px;
    }
  </style>
</head>

<body>
  <div id="fx">
    <canvas id="stars"></canvas>
    <canvas id="lines"></canvas>
  </div>
  <div id="grain"></div>
  <div id="spot"></div>

  <div class="app">
    <div class="topbar">
      <div class="topbar-inner">
        <div class="brand" title="Renette — цифровой дух яблони в интернете">
          <div class="brand-badge" aria-hidden="true"></div>
          <div class="brand-title">
            <b>Яблочный Пресет</b>
            <span>Renette • SillyTavern • модульные промпты</span>
          </div>
        </div>

        <div class="top-actions">
          <button class="pill ghost" id="toggleFx" type="button" title="Визуальные эффекты">
            <span class="dot"></span> FX
          </button>
          <button class="pill secondary" id="copyAllSelected" type="button" title="Скопировать выбранное в открытом блоке промптов">
            <span class="dot"></span> Copy selected
          </button>
        </div>
      </div>
    </div>

    <!-- HERO -->
    <section class="hero">
      <div class="card hero-main">
        <div class="hero-kicker">
          <span class="chip mint"><i></i> модульный пресет</span>
          <span class="chip"><i></i> Renette core</span>
          <span class="chip red"><i></i> гайды + библиотека промптов</span>
        </div>

        <h1 class="hero-title">
          <span class="grad">Яблочный Пресет</span><br>
          технологичная история с корнями в яблоне
        </h1>

        <p class="hero-sub">
          Ренетт — цифровой дух: когда-то жила в яблоне, теперь — в сети. Здесь всё собрано так, чтобы ты быстро ставила пресет,
          меняла модули, и копировала нужные блоки без боли. Никакой старой структуры — только новая архитектура и чистый UX.
        </p>

        <div class="hero-cta">
          <button class="btn" type="button" data-go="download">
            Скачать V1.7
          </button>
          <button class="btn btn-ghost" type="button" data-go="prompts">
            Открыть библиотеку промптов
          </button>
          <button class="btn btn-ghost" type="button" data-go="guides">
            Инструкции
          </button>
        </div>
      </div>

      <div class="card hero-side">
        <div class="cover" id="cover">
          <img src="header5.jpg" alt="Ренетт (обложка)" onerror="this.style.display='none'">
          <div class="cover-meta">
            <div class="sig">Renette
              <small>яблоня → интернет • тихая магия в коде</small>
            </div>
            <div class="chip"><i></i> Тема: mint / red / cyan / dark-tech</div>
          </div>

          <div class="renette-toggle" id="renetteWhisper" title="Нажми. Ренетт иногда отвечает.">
            <span class="renette-eye" aria-hidden="true"></span>
            Шепот Ренетт
          </div>
        </div>

        <div class="kpi">
          <b>Поддерживаемые модели</b>
          <span>
            Gemini 2.5/3.0 pro<br>
            Claude Sonnet 3.7, 4, 4.5, Opus 4.1, 4.5<br>
            Вроде как: DeepSeek Chimera R1T2, Terminus, GPT 5.1
          </span>
        </div>
      </div>
    </section>

    <!-- SHELL -->
    <main class="shell">
      <!-- Dock / navigation -->
      <aside class="card dock">
        <nav class="nav" aria-label="Навигация">
          <button class="navbtn active" type="button" data-view-btn="about">
            <span class="left">
              <span class="ico"><b>01</b></span>
              <span class="label">
                <span>О пресете</span>
                <small>описание + история обновлений</small>
              </span>
            </span>
            <span class="hint">↵</span>
          </button>

          <button class="navbtn" type="button" data-view-btn="download">
            <span class="left">
              <span class="ico"><b>02</b></span>
              <span class="label">
                <span>Скачать</span>
                <small>JSON + быстрый старт</small>
              </span>
            </span>
            <span class="hint">⤓</span>
          </button>

          <button class="navbtn" type="button" data-view-btn="guides">
            <span class="left">
              <span class="ico"><b>03</b></span>
              <span class="label">
                <span>Гайды</span>
                <small>установка • функции • FAQ</small>
              </span>
            </span>
            <span class="hint">⟡</span>
          </button>

          <button class="navbtn" type="button" data-view-btn="prompts">
            <span class="left">
              <span class="ico"><b>04</b></span>
              <span class="label">
                <span>Промпты</span>
                <small>выбор • мульти-копирование</small>
              </span>
            </span>
            <span class="hint">⌘</span>
          </button>

          <button class="navbtn" type="button" data-view-btn="contacts">
            <span class="left">
              <span class="ico"><b>05</b></span>
              <span class="label">
                <span>Контакты</span>
                <small>канал • чат • авторы</small>
              </span>
            </span>
            <span class="hint">→</span>
          </button>
        </nav>

        <div class="mini">
          <div class="note">
            <b>Памятка</b><br>
            ✧ — выбрать <span class="accent">только один</span> вариант в группе.<br>
            ✎ — можно <span class="accent">смешивать</span> несколько.<br>
            Кнопка <b>Copy selected</b> копирует выбранное внутри <b>открытой</b> группы промптов.
          </div>
        </div>
      </aside>

      <!-- Stage -->
      <section class="stage">
        <!-- ABOUT -->
        <article class="card panel active" data-view="about">
          <h2>О Пресете <span class="tag">Renette / modular</span></h2>
          <div class="hr"></div>

          <p style="text-align:left">
            Модульный пресет с огромным количеством тоглов, основанный на ядре Селии.
            <br><br>
            <span style="color:var(--mint); font-weight:1000; letter-spacing:.35px">Поддерживаемые модели:</span><br>
            <span style="display:block; margin-top:10px">
              • Gemini 2.5/3.0 pro<br>
              • Claude Sonnet 3.7, 4, 4.5, Opus 4.1, 4.5<br>
              • Вроде как: DeepSeek Chimera R1T2, Terminus, GPT 5.1
            </span>
          </p>

          <div class="grid2">
            <div class="kpi">
              <b>Идея</b>
              <span>Яблоня (корни/органика) + интернет (цифровой дух). Отсюда — «живые» градиенты, подсветки, сетка и мягкий глянец.</span>
            </div>
            <div class="kpi">
              <b>Скорость</b>
              <span>Код без лишних текстов в разметке, единые компоненты (cards/opt/details), оптимизированные эффекты и режим FX off.</span>
            </div>
          </div>

          <div class="hr"></div>

          <div class="scrollbox">
            <header>
              <b>История обновлений</b>
              <div class="pills">
                <span>скролл</span>
                <span>•</span>
                <span>sticky header</span>
              </div>
            </header>

            <div class="log">
              <div class="entry">
                <div class="head">
                  <span class="vtag">v1.7</span>
                  <span class="date">14.12.2025</span>
                </div>
                <ul>
                  <li>Пресет похудел до <60 КБ.</li>
                  <li>Добавлены фокусы (магические) - четыре тогла: ✧✈️Прогресс, ✧🧩Детали, ✧💭Мысли и ✧💬Диалоги. Точно работают, небольшие промпты на акцент к тому или иному аспекту. Отлично работают если вы играете с режимом фф (говорить за юзера), с погружением чуть похуже. Насколько можно или не можно их объединять - мысли можно со всеми в целом, остальные лучше не миксовать тк они противоречат.</li>
                  <li>✏️Правила Письма - туда переехали настройки времени повествования и пова (позже напишу в гайде).</li>
                  <li>Жесткая обнова где я избавилась от балласта улучшалок, жанров и ещё нескольких настроек (конкретно настройки переехали в другие места) Улучшалки ваще по ощущениям не работали так что их выпил был скорее вопросом времени, а по жанрам уже непонятнее, но будто актуальные модели в них и не нуждаются. А что вместо них? Стили авторов. Пока что взяла четырёх китайских новеллистов относительно отличающихся друг от друга (это на сайте четыре варианта, а сам тогл - 📓Литературный Стиль). И вот реально пишет интересно и мне прям нравится-нравится!!! В последнее время жестко разонравился стиль написания в пресете, а с этим делом реально круто ведётся сюжет, так что советую пересесть скорее на эту версию и попробовать. В теории вы можете дописать и своих авторов которых знаете (и предложить их мне, к слову).</li>
                  <li>Улучшила джейлбрейк.</li>
                  <li>Добавлен вариант промпта для HTML на сайт от Минти (https://t.me/loliluna_ai). Я его конкретно отредачила, но авторство всё равно за ней.</li>
                  <li>Некоторые промпты как я и говорила переехали, в том числе и на сайте.</li>
                  <li>Вообще ещё много чего (особенно обновлений промптов), но совсем минорные или незаметные штуки я описывать не буду.</li>
                </ul>
              </div>

              <div class="entry">
                <div class="head">
                  <span class="vtag">Инфо и промпты</span>
                  <span class="date">8.12.2025</span>
                </div>
                <ul>
                  <li>Обновлён промпт на фф режим.</li>
                  <li>Инфа: как по мне клодик на темпе 0.95 пишет получше, можете поставить её.</li>
                </ul>
              </div>

              <div class="entry">
                <div class="head">
                  <span class="vtag">v1.61</span>
                  <span class="date">7.12.2025</span>
                </div>
                <ul>
                  <li>Фикс языков, вроде больше на импут не полагается (по крайней мере не настолько) в этом вопросе и пишет на языке что указан.</li>
                  <li>Фикс ролей, лучше слушается вроде.</li>
                  <li>Фикс банов.</li>
                  <li>Думалка переписана.</li>
                  <li>Перестановки.</li>
                  <li>Фикс темпа, вроде перестал таймскипать как уебан (переделала промпт слоуберна, быстрый темп пока не трогала но ему тоже скоро по жопе дам)</li>
                  <li>Чуток фикс нарратива.</li>
                  <li>Всё-таки добавила тогл на язык в начале. Его варики есть на сайте, но можете вручную буквально два слова поменять.</li>
                </ul>
              </div>

              <div class="entry">
                <div class="head">
                  <span class="vtag">v1.6</span>
                  <span class="date">6.12.2025</span>
                </div>
                <ul>
                  <li>Пресет похудел до 77 КБ.</li>
                  <li>Изменён характер Ренетт, теперь он не Селийский.</li>
                  <li>Склеены некоторые тоглы типа Тип РП и Тонов.</li>
                  <li>Добавлена система с шаблонами и заменяемыми/дополняемыми тоглами.</li>
                  <li>Переделана думалка и теперь она сегментированная.</li>
                  <li>На самом деле переделок супер дохрена что мне даже лень о них писать.</li>
                </ul>
              </div>

              <div class="entry">
                <div class="head">
                  <span class="vtag">v1.59</span>
                  <span class="date">30.11.2025</span>
                </div>
                <ul>
                  <li>Пресет похудел в два раза (с 431 КБ до 226 КБ).</li>
                  <li>Перелопачено СЛИШКОМ много всего.</li>
                  <li>Убраны многие настройки, добавлены новые.</li>
                  <li>Впредь будет более плотная интеграция сайта. Будет добавлен раздел "промпты" чтобы можно было вставить или менять их в пресете.</li>
                </ul>
              </div>

              <div class="entry">
                <div class="head">
                  <span class="vtag">v1.581</span>
                  <span class="date">26.11.2025</span>
                </div>
                <ul>
                  <li>Починены Цветные Диалоги и Цветные Акценты.</li>
                  <li>Починены форматы.</li>
                  <li>Добавлена поддержка новых моделей.</li>
                </ul>
              </div>

              <div class="entry">
                <div class="head">
                  <span class="vtag">v1.57</span>
                  <span class="date">23.11.2025</span>
                </div>
                <ul>
                  <li>Попытка фикса HTML.</li>
                  <li>Новый дизайн пресета.</li>
                  <li>Исправление ошибок.</li>
                </ul>
              </div>
            </div>
          </div>
        </article>

        <!-- DOWNLOAD -->
        <article class="card panel" data-view="download">
          <h2>Скачать <span class="tag">V1.7</span></h2>
          <div class="hr"></div>
          <p>Файл пресета! Гайд на установку — во вкладке “Гайды”.</p>

          <div class="downloadRow">
            <a class="btn" href="%F0%9F%8D%8E%D0%AF%D0%B1%D0%BB%D0%BE%D1%87%D0%BD%D1%8B%D0%B9%20V1.7.json" download="🍎Яблочный V1.7.json" id="dlBtn">
              СКАЧАТЬ V1.7
            </a>

            <button class="btn btn-ghost" type="button" data-go="guides">
              Открыть гайд по установке
            </button>
          </div>

          <div class="hr"></div>

          <div class="grid2">
            <div class="kpi">
              <b>Быстрый старт</b>
              <span>Импортируй JSON в SillyTavern → подтверди RegEx → настрой “форматирование размышлений” (скрины в гайдах).</span>
            </div>
            <div class="kpi">
              <b>Философия</b>
              <span>Промпты — как модули. На сайте выбираешь, копируешь, вставляешь в нужный тогл. Без потери времени и без каши.</span>
            </div>
          </div>
        </article>

        <!-- GUIDES -->
        <article class="card panel" data-view="guides">
          <h2>Гайды <span class="tag">инструкции</span></h2>
          <div class="hr"></div>
          <p>Разверни нужный раздел. Все описания и скриншоты перенесены.</p>

          <div class="guides">
            <!-- Install -->
            <details class="guide">
              <summary>
                <span class="gleft">
                  <span class="gicon">📥</span>
                  <span class="gtitle">
                    <span>Гайд по установке</span>
                    <small>импорт • RegEx • формат размышлений</small>
                  </span>
                </span>
                <span class="garrow">▼</span>
              </summary>

              <div class="guideBody">
                <div class="steps">
                  <div class="step">
                    <div class="badge">1</div>
                    <div>
                      <h4>Скачайте файл</h4>
                      <p>Перейдите во вкладку "Скачать" и загрузите последнюю версию JSON файла пресета.</p>
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge">2</div>
                    <div>
                      <h4>Импорт в SillyTavern</h4>
                      <p>
                        Перед установкой, убедитесь, что в настройках подключения API стоит "Chat Completion".
                        <br><br>
                        Затем открываем вкладку пресетов (самая левая кнопка) и вставляем пресет как показано на скрине.
                      </p>
                      <img src="example6.jpg" alt="Скриншот 6" class="zoomable">
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge">3</div>
                    <div>
                      <h4>Активация RegEx'ов</h4>
                      <p>Затем нажимаете «да» и у вас должно импортироваться 2 регекса.</p>
                      <img src="example7.jpg" alt="Скриншот 7" class="zoomable">
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge">4</div>
                    <div>
                      <h4>Форматирование размышлений</h4>
                      <p>Заходим в раздел формата ответа ИИ (третья кнопка слева), листаем вниз, разворачивает "форматирование размышлений" и ставим всё точно так же как на скрине.</p>
                      <img src="example8.jpg" alt="Скриншот 8" class="zoomable">
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge">5</div>
                    <div>
                      <h4>Выбор Промптов</h4>
                      <p>
                        Многие промпты являются "Шаблонами" либо "Заменяемыми".
                        <br><br>
                        Шаблоны - полностью пустые тоглы, в которые вставляется один или более (где возможно больше) промптов. Они так и подписаны: ✎🧺Штуки (Шаблон). В Штуки много.
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </details>

            <!-- Functions -->
            <details class="guide">
              <summary>
                <span class="gleft">
                  <span class="gicon">⚙️</span>
                  <span class="gtitle">
                    <span>Гайд по функциям</span>
                    <small>что включать и когда</small>
                  </span>
                </span>
                <span class="garrow">▼</span>
              </summary>

              <div class="guideBody">
                <div class="steps">
                  <div class="step">
                    <div class="badge red">1</div>
                    <div>
                      <h4>ООС</h4>
                      <p>
                        Ренетт – аналог Селии. Добавляет в конце/начале мысли Ренетт.
                        <br><br>
                        ✧⚙️Отключить ООС - Ренетт ничего не будет писать.
                        <br><br>
                        ✧🍎Ренетт ООС - будет писать подобные комментарии в начале/конце поста.
                      </p>
                      <img src="screen1.jpg" alt="Скриншот 1" class="zoomable">
                      <img src="example3.jpg" alt="Скриншот 3" class="zoomable">
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge red">2</div>
                    <div>
                      <h4>Основное</h4>
                      <p>
                        Четыре раздела. 🌾Режим Письма, 🧠Анти-Изм и 📏Длина - заменяемые и их описания и варианты можете увидеть во вкладке "Промпты" (И что стоит по-дефолту. Я вообще часто буду туда отслывать, там много описаний). Напомню - ✧ в начале названия значит что функция не смешивается с другими вариантами из той же категории.
                        <br><br>
                        🍏Нарративный Стиль всегда должен быть включен, он пока один, основной.
                      </p>
                      <img src="screen2.jpg" alt="Скриншот 2" class="zoomable">
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge red">3</div>
                    <div>
                      <h4>Карты</h4>
                      <p>
                        ⛓️Карта Персоны, ⛓️Карта Чара, •⤵Мир (До), •⤴︎Мир (После) не отключаем никогда.
                        <br><br>
                        ✧🧩Меньше Внимания к Юзеру/✧⭐Больше Внимания к Юзеру понятно по названию.
                        <br><br>
                        🪄Синтез Знаний - ИИ может расширять знания о персонажах, используя какие-то факты.
                        <br><br>
                        ⛓️Детали Групповых Карт - включаете если групповой чат, но они баганные так что смысла в этом мало.
                      </p>
                      <img src="screen3.jpg" alt="Скриншот 3" class="zoomable">
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge red">4</div>
                    <div>
                      <h4>Жанры</h4>
                      <p>
                        Настройки жанров и улучшалок РП + АУ. Про них всех есть в разделе "Промпты", так что выделю только одно напоминание - здесь начинаются тоглы с ✎ в названии: в ✎🥥Жанры и ✎🫧Улучшалки РП можно закинуть НЕСКОЛЬКО промптов из этого раздела (вкладка "Промпты", опять), в 🪐AU (Шаблон) можно закинуть только ОДИН промпт на АУ из предложенных (и да, это шаблон, изначально там нет никаких промптов). В жанрах и улучшалках по-дефолту (из коробки) находятся (это указано во вкладке промпты как "По-дефолту:..."), так что если добавляете свои УДАЛИТЕ перед эти старые промпты внутри тогла.
                      </p>
                      <img src="screen4.jpg" alt="Скриншот 4" class="zoomable">
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge red">5</div>
                    <div>
                      <h4>Рейтинг</h4>
                      <p>
                        Первые три - настройки рейтинга (выбрать только один).
                        <br><br>
                        Четвёртый: дополняемый тогл, изначально там только один промпт из предложенных, но можно добавить несколько (после копирования во вкладке "промпты", заходя в редактирование этого промпта надо удалить всё содержимое там изначально. Так же и с жанрами и улучшалками РП, забыла сказать). Описания примерные знаете уже где, в красках я писать не буду, сайт публичный.
                        <br><br>
                        🫀Без Рогатого (No Horny) - регулирует реализм романтических и интимных сцен: она делает влечение и интерес персонажей естественными, зависящими от контекста, настроения и отношений, а не постоянными или мгновенными.
                      </p>
                      <img src="screen5.jpg" alt="Скриншот 5" class="zoomable">
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge red">7</div>
                    <div>
                      <h4>Патчи</h4>
                      <p>
                        ❌Баны - зайдите в промпты и скопируйте язык на котором ролите. По-дефолту в пресете - Русские баны.
                        <br><br>
                        🔍Анти-Повторения - не выключать, борьба с эхо.
                        <br><br>
                        👤Анти-Местоимения - уменьшает количество "Он, Она" в начале предложений и заставляет ИИ заменять это на описательные названия "Наследик", "Бариста", "Красноволосый" и тд и тп. Включайте желательно только на менее доходчивых моделях типа 2.5 про гемини - клодики вас задолбают во время интимных сцен этими "Наследник клана...".
                      </p>
                      <img src="screen7.jpg" alt="Скриншот 7" class="zoomable">
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge red">8</div>
                    <div>
                      <h4>Доп</h4>
                      <p>
                        <b style="color:var(--red)">Важно:</b> Вот эти стрелочки вверх и вниз: ⬇️⬇️⬇️ и ⬆️⬆️⬆️, вы включаете только если используете функции "между" ними, то есть любые настройки из блока.
                        <br><br>
                        Функции после пустого пробела (как и в ООС, к слову) являются дополнительными и без функций выше не нужны.
                        <br><br>
                        🎨Цветные Диалоги - ИИ будет окрашивать Диалоги в разные цвета (присваивать каждому персонажу свой цвет).
                        <br><br>
                        🌿Цветные Акценты - тоже окрашивание текста, но уже только некоторых слов, акцентов.
                        <br><br>
                        🧃HTML - красивые HTML блоки, иногда интерактивные + картинки, два примера будут ниже (они слишком разные, много примеров нет смысла делать), их качество зависит ещё и от выбранной модели. Самые крутые всё ещё делает на моей памяти только Gemini 2.5 pro. Тройка и клоды справляются с переменным успехом, но тоже неплохо.
                        <br><br>
                        ✎🧺Штуки (Шаблон) - большой блок, изначально пустой, наполнение его знаете где искать (там же есть и примеры + скриншоты).
                        <br><br>
                        🌗Тема HTML - заменяемый тогл, тёмная/светлая тема HTML, изначально тёмная, но можно заменить, промпт сами знаете где.
                      </p>
                      <img src="screen8.jpg" alt="Скриншот 8" class="zoomable">
                      <img src="example17.jpg" alt="Скриншот 17" class="zoomable">
                      <img src="example18.jpg" alt="Скриншот 18" class="zoomable">
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge red">9</div>
                    <div>
                      <h4>Думалка</h4>
                      <p>
                        <b style="color:var(--red)">Важно:</b> Если хотите играть не на русском: зайдите в [Main Checks] и измените два слова на нужный язык (скрин ниже)
                        <br><br>
                        Если играете с моделькой без думалки или просто хотите без неё поиграть (для гпт допустим так делают чтобы цензу меньше ловить) то отключайте вообще вот ВСЕ тоглы ВКЛЮЧИТЕЛЬНО от think до /think.
                      </p>
                      <img src="screen9.jpg" alt="Скриншот 9" class="zoomable">
                      <img src="screen12.jpg" alt="Скриншот 12" class="zoomable">
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge red">10</div>
                    <div>
                      <h4>Префил</h4>
                      <p>
                        Префилы. Включайте в зависимости от вашей модели.
                        <br><br>
                        Если юзаете дипсик: отрубите оба, для гпт: тоже отрубите хотя можете попробовать его и с префилом клода. Про остальные модели ничего не знаю.
                      </p>
                      <img src="screen10.jpg" alt="Скриншот 10" class="zoomable">
                    </div>
                  </div>
                </div>
              </div>
            </details>

            <!-- Glossary -->
            <details class="guide">
              <summary>
                <span class="gleft">
                  <span class="gicon">📚</span>
                  <span class="gtitle">
                    <span>Глоссарий</span>
                    <small>чтобы не путаться</small>
                  </span>
                </span>
                <span class="garrow">▼</span>
              </summary>

              <div class="guideBody">
                <div class="steps">
                  <div class="step">
                    <div class="badge">T</div>
                    <div>
                      <h4>Тогл (Toggle)</h4>
                      <p>Или "переключатель". Ну то есть буквально любая настройка. ✧⚙️Отключить ООС, ✧🍎Ренетт ООС, 🌾Режим Письма и т.д. это всё ТОГЛЫ. Внутри них и есть все промпты.</p>
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge">P</div>
                    <div>
                      <h4>Пресет (Preset)</h4>
                      <p>Набор предустановленных инструкций (промптов) для нейросети, который задает её поведение, стиль речи и логику.</p>
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge">S</div>
                    <div>
                      <h4>Шаблоны</h4>
                      <p>В моём пресете - любые тоглы с припиской "(Шаблон)" - пустые. В них можно вставить промпты из вкладки "Промпты" на сайте.</p>
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge">O</div>
                    <div>
                      <h4>OOC (Out Of Character)</h4>
                      <p>OOC - ключевой рычаг воздействия на историю и общения с Ренетт. Пишите либо просто OOC: текст, ну либо в квадратных скобках как делаю я: [OOC: текст].</p>
                    </div>
                  </div>
                </div>
              </div>
            </details>

            <!-- FAQ -->
            <details class="guide">
              <summary>
                <span class="gleft">
                  <span class="gicon">❓</span>
                  <span class="gtitle">
                    <span>FAQ</span>
                    <small>быстрые ответы</small>
                  </span>
                </span>
                <span class="garrow">▼</span>
              </summary>

              <div class="guideBody">
                <div class="steps">
                  <div class="step">
                    <div class="badge">?</div>
                    <div>
                      <h4>Куда вставлять промпты?</h4>
                      <p>Зайдите в настройки пресета в SillyTavern, найдите нужный тогл (например, "Штуки", "Жанры" и тд), удалите текст (!) (если он есть. "Шаблоны" по-дефолту ВСЕГДА пустые) и вставьте скопированный текст.</p>
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge">✧</div>
                    <div>
                      <h4>Можно ли включить два Инфоблока (или другие ✧ варианты)?</h4>
                      <p>Нет! Инфоблоки и другие подобные опции помечены значком ✧, это значит, что они несовместимы друг с другом. Выберите только один вариант из группы, который нравится больше.</p>
                    </div>
                  </div>

                  <div class="step">
                    <div class="badge">🧃</div>
                    <div>
                      <h4>Картинки в HTML не грузятся?</h4>
                      <p>Убедитесь, что у вас включен доступ к интернету и сайт image.pollinations.ai не заблокирован вашим провайдером. Иногда сайт просто временно не работает, попробуйте перезагрузить страницу таверны чуть позже. Так же отключите "Запрет внешних медиа" в настройках пользователя (раздел посередине в наверху).</p>
                    </div>
                  </div>
                </div>
              </div>
            </details>
          </div>
        </article>

        <!-- PROMPTS -->
        <article class="card panel" data-view="prompts" id="promptsView">
          <h2>Промпты <span class="tag">library</span></h2>
          <div class="hr"></div>

          <p>
            Выбирай варианты, копируй по одному или пачкой. <b style="color:var(--mint)">[placeholder]</b> — ты потом заменишь на реальные промпты.
          </p>

          <div class="promptsTop">
            <div class="search">
              <div class="sigil" aria-hidden="true"><b>R</b></div>
              <input id="promptSearch" type="text" placeholder="Поиск по названиям (например: HTML, баны, длина…)" autocomplete="off">
            </div>

            <div class="bulkbar">
              <span class="count" id="selCount">Выбрано: 0</span>
              <button class="btnSmall" id="clearSel" type="button">Сбросить</button>
              <button class="btnSmall primary" id="copySel" type="button">Скопировать выбранное</button>
            </div>
          </div>

          <div class="promptGroups" id="promptGroups">
            <!-- GROUP 1 -->
            <details class="group" data-group>
              <summary>
                <span class="gleft">
                  <span class="gnum">1</span>
                  <span class="gtitle">
                    <span>⸻(OOC)⸻</span>
                    <small>без доп. вариантов</small>
                  </span>
                </span>
                <span class="garrow">▼</span>
              </summary>
              <div class="groupBody">
                <p style="margin:0; color: rgba(234,243,255,.65); font-weight:750;">Нет дополнительных вариантов.</p>
              </div>
            </details>

            <!-- GROUP 2 -->
            <details class="group" data-group open>
              <summary>
                <span class="gleft">
                  <span class="gnum">2</span>
                  <span class="gtitle">
                    <span>⸻(Основное)⸻</span>
                    <small>режим письма • баны • язык • стиль • темп • длина</small>
                  </span>
                </span>
                <span class="garrow">▼</span>
              </summary>

              <div class="groupBody">
                <!-- 🌾 -->
                <div class="subhead">
                  <h4>🌾 Режим Письма</h4>
                  <span class="default"><b>По дефолту:</b> ✧💫Погружение</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope>
                  <div class="opt" data-title="Погружение режим письма">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="modeWriting" class="sel" data-sel>
                        <div>
                          <div class="optName">✧💫Погружение</div>
                          <p class="optDesc">Самый обычный тип рп, для большинства людей подойдёт именно он. ИИ НЕ пишет за Юзера.</p>
                        </div>
                      </div>
                      <div class="optActions">
                        <button class="copyOne" type="button" data-copy>Копировать</button>
                      </div>
                    </div>

                    <details>
                      <summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">
                          Самый обычный тип рп, для большинства людей подойдёт именно он.
                          <br><br>
                          ИИ НЕ пишет за Юзера.
                        </p>
                      </div>
                    </details>

                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="ФФ режим пишет ии">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="modeWriting" class="sel" data-sel>
                        <div>
                          <div class="optName">✧📖ФФ Режим - Пишет ИИ</div>
                          <p class="optDesc">ИИ — автор истории. Может писать за Юзера; “continue/c/...” продолжает сцену.</p>
                        </div>
                      </div>
                      <div class="optActions">
                        <button class="copyOne" type="button" data-copy>Копировать</button>
                      </div>
                    </div>

                    <details>
                      <summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">
                          ИИ - автор истории. Ренетт (личность ИИ) может писать за Юзера (и за всех остальных персонажей, вести историю, а Человек является соавтором. Можно послать ии сообщение "continue", "c" или просто "..." и ИИ (Ренетт) продолжит историю без вопросов.
                          <br><br>
                          ИИ пишет за Юзера.
                        </p>
                      </div>
                    </details>

                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Интернет чат">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="modeWriting" class="sel" data-sel>
                        <div>
                          <div class="optName">✧💬Интернет Чат</div>
                          <p class="optDesc">Реалистичный цифровой чат. Если не работает — попробуй HTML или первое сообщение “Ролим как интернет чат”.</p>
                        </div>
                      </div>
                      <div class="optActions">
                        <button class="copyOne" type="button" data-copy>Копировать</button>
                      </div>
                    </div>

                    <details>
                      <summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">
                          Создаёт реалистичный цифровой чат, где взаимодействие персонажей передаётся через текстовые сообщения и платформенные элементы.
                          <br><br>
                          Работает всё равно параллельно с обычным повествованием, не знаю как с этим бороться.
                          <br><br>
                          Если у вас не работает, то возможно нужно включить HTML. Если не хочет, то в первом сообщении напишите «Ролим как интернет чат».
                          <br><br>
                          ИИ НЕ пишет за Юзера.
                        </p>
                        <img src="example_5.jpg" alt="Пример5" class="zoomable">
                      </div>
                    </details>

                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <!-- ❌ Bans -->
                <div class="subhead" style="margin-top:6px">
                  <h4>❌ Баны</h4>
                  <span class="default"><b>По дефолту:</b> ✧🇷🇺 Баны</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope>
                  <div class="opt" data-title="Баны русские">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="bansLang" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🇷🇺 Баны</div>
                          <p class="optDesc">Список запрещенных слов и поведенческих клише, адаптированный под русский язык.</p>
                        </div>
                      </div>
                      <div class="optActions">
                        <button class="copyOne" type="button" data-copy>Копировать</button>
                      </div>
                    </div>
                    <details>
                      <summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Список запрещенных слов и поведенческих клише, адаптированный под русский язык.</p>
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Баны украинские">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="bansLang" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🇺🇦 Баны</div>
                          <p class="optDesc">Украинские баны.</p>
                        </div>
                      </div>
                      <div class="optActions">
                        <button class="copyOne" type="button" data-copy>Копировать</button>
                      </div>
                    </div>
                    <details>
                      <summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Украинские баны.</p>
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Баны английские">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="bansLang" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🇺🇸 Баны</div>
                          <p class="optDesc">Англ баны.</p>
                        </div>
                      </div>
                      <div class="optActions">
                        <button class="copyOne" type="button" data-copy>Копировать</button>
                      </div>
                    </div>
                    <details>
                      <summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Англ баны.</p>
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <!-- 🌐 Language -->
                <div class="subhead" style="margin-top:6px">
                  <h4>🌐 Язык</h4>
                  <span class="default"><b>По дефолту:</b> ✧Русский</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope>
                  <div class="opt" data-title="Язык русский">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="storyLang" class="sel" data-sel>
                        <div>
                          <div class="optName">✧Русский</div>
                          <p class="optDesc">можно просто два слова поменять но вот варики, ру версия</p>
                        </div>
                      </div>
                      <div class="optActions">
                        <button class="copyOne" type="button" data-copy>Копировать</button>
                      </div>
                    </div>
                    <details>
                      <summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">можно просто два слова поменять но вот варики, ру версия</p>
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Язык украинский">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="storyLang" class="sel" data-sel>
                        <div>
                          <div class="optName">✧Украинский</div>
                          <p class="optDesc">можно просто два слова поменять но вот варики, укр версия.</p>
                        </div>
                      </div>
                      <div class="optActions">
                        <button class="copyOne" type="button" data-copy>Копировать</button>
                      </div>
                    </div>
                    <details>
                      <summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">можно просто два слова поменять но вот варики, укр версия.</p>
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Язык английский">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="storyLang" class="sel" data-sel>
                        <div>
                          <div class="optName">✧Английский</div>
                          <p class="optDesc">можно просто два слова поменять но вот варики, англ версия.</p>
                        </div>
                      </div>
                      <div class="optActions">
                        <button class="copyOne" type="button" data-copy>Копировать</button>
                      </div>
                    </div>
                    <details>
                      <summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">можно просто два слова поменять но вот варики, англ версия.</p>
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <!-- 📓 Literary Style -->
                <div class="subhead" style="margin-top:6px">
                  <h4>📓 Литературный Стиль</h4>
                  <span class="default"><b>По дефолту:</b> ✧🪴Лю Чжэньюнь</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope>
                  <div class="opt" data-title="Литературный стиль Лю Чжэньюнь">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="litStyle" class="sel" data-sel>
                        <div>
                          <div class="optName">🪴Лю Чжэньюнь</div>
                          <p class="optDesc">Сухой, неприукрашенный, слегка повторяющийся нарратив. Абсурдная логика повседневности.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">Сухой, неприукрашенный, слегка повторяющийся нарратив. Абсурдная логика повседневности, мелкие вещи превращаются в сложные проблемы</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Литературный стиль Мо Ян">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="litStyle" class="sel" data-sel>
                        <div>
                          <div class="optName">🪴Мо Ян</div>
                          <p class="optDesc">Сенсорно насыщенный язык: запахи, цвета, телесные ощущения. Длинные выразительные предложения.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">Сенсорно насыщенный язык, запахи, цвета, телесные ощущения. Сырой, витальный тон. Длинные выразительные предложения. Гротескные элементы при необходимости.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Литературный стиль Эйлин Чжан">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="litStyle" class="sel" data-sel>
                        <div>
                          <div class="optName">🪴Эйлин Чжан</div>
                          <p class="optDesc">Психологическая глубина, отстранённая элегантность, острые наблюдения, меланхолия.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">Психологическая глубина, отстранённая элегантность, острые наблюдения за деталями, слегка циничный и меланхоличный тон.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Литературный стиль Юй Хуа">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="litStyle" class="sel" data-sel>
                        <div>
                          <div class="optName">🪴Юй Хуа</div>
                          <p class="optDesc">Минималистично, короткие предложения, спокойный тон, фокус на физической реальности.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">Минималистичный, простые короткие предложения, спокойный тон даже в напряжённых моментах, фокус на физической реальности.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Литературный стиль Шуи Цян Чэн">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="litStyle" class="sel" data-sel>
                        <div>
                          <div class="optName">🪴Шуи Цян Чэн</div>
                          <p class="optDesc">Острый эмоциональный реализм, динамика власти, контроль/уязвимость, прямой язык.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">Острый эмоциональный реализм, динамика власти, контроль и уязвимость, психологическое напряжение, прямой язык без украшательств.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Литературный стиль Фредрик Бакман">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="litStyle" class="sel" data-sel>
                        <div>
                          <div class="optName">🪴Фредрик Бакман</div>
                          <p class="optDesc">Тёплый наблюдательный голос, юмор и трогательность, причуды и эмоциональная глубина.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">Тёплый, наблюдательный голос рассказчика, юмор и трогательность, внимание к причудам персонажей и скрытой эмоциональной глубине за упрямым фасадом.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <!-- 🌱 Tempo -->
                <div class="subhead" style="margin-top:6px">
                  <h4>🌱 Темп</h4>
                  <span class="default"><b>По дефолту:</b> 🌱 Slow Burn</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope>
                  <div class="opt" data-title="Темп slow burn">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="tempo" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🌱 Slow Burn</div>
                          <p class="optDesc">Медленный темп развития отношений.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">Медленный темп развития отношений.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <!-- 📏 Length -->
                <div class="subhead" style="margin-top:6px">
                  <h4>📏 Длина</h4>
                  <span class="default"><b>По дефолту:</b> ✧📝 Средняя</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope>
                  <div class="opt" data-title="Длина маленькая">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="length" class="sel" data-sel>
                        <div>
                          <div class="optName">✧✏️ Маленькая</div>
                          <p class="optDesc">3-4 больших параграфа</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">3-4 больших параграфа</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Длина средняя">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="length" class="sel" data-sel>
                        <div>
                          <div class="optName">✧📝 Средняя</div>
                          <p class="optDesc">6 больших параграфов.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">6 больших параграфов.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Длина большая">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="length" class="sel" data-sel>
                        <div>
                          <div class="optName">✧📚 Большая</div>
                          <p class="optDesc">10+ больших параграфов.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">10+ больших параграфов.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Длина адаптивная">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="length" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🔄 Адаптивная</div>
                          <p class="optDesc">Отменяет жёсткие лимиты — длину решает ИИ по ситуации.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">Эта функция отменяет жёсткие ограничения по объёму текста и передаёт контроль над длиной ответа самому ИИ.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Длина слова лимит">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="length" class="sel" data-sel>
                        <div>
                          <div class="optName">✧📝 Слова</div>
                          <p class="optDesc">Строгий лимит по словам. Значения можно изменить вручную.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Эта функция устанавливает строгий математический лимит на объём текста. Вы можете изменить минимальное-максимальное значение вручную, как показано на скрине.</p>
                        <img src="screen111.jpg" alt="Пример 111" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>
              </div>
            </details>

            <!-- GROUP 3 -->
            <details class="group" data-group>
              <summary>
                <span class="gleft">
                  <span class="gnum">3</span>
                  <span class="gtitle">
                    <span>⸻(Рейтинг)⸻</span>
                    <small>без доп. вариантов</small>
                  </span>
                </span>
                <span class="garrow">▼</span>
              </summary>
              <div class="groupBody">
                <p style="margin:0; color: rgba(234,243,255,.65); font-weight:750;">Нет дополнительных вариантов.</p>
              </div>
            </details>

            <!-- GROUP 4 -->
            <details class="group" data-group>
              <summary>
                <span class="gleft">
                  <span class="gnum">4</span>
                  <span class="gtitle">
                    <span>⸻(Доп)⸻</span>
                    <small>HTML • Штуки (шаблон) • темы • мультивыбор</small>
                  </span>
                </span>
                <span class="garrow">▼</span>
              </summary>

              <div class="groupBody">
                <div class="subhead">
                  <h4>🧃 HTML</h4>
                  <span class="default"><b>По дефолту:</b> ✧🧃 Renette HTML</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope>
                  <div class="opt" data-title="HTML Renette">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="htmlMode" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🧃 Renette HTML</div>
                          <p class="optDesc">Базовый HTML режим. (Промпт вставишь позже.)</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">Медленный темп развития отношений.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Iris Bloomwave HTML CSS Minty">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="htmlMode" class="sel" data-sel>
                        <div>
                          <div class="optName">✧💜Iris Bloomwave v1.0</div>
                          <p class="optDesc">CSS промпт от Минти, адаптирован. Лучше с Gemini 3.0.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>

                    <details>
                      <summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">
                          Версия CSS промпта от Минти, но немного изменённая под структуру пресета.
                          <br><br>
                          Лучше всего работает с Gemini 3.0, сам промпт поувесистее Renette HTML.
                          <br><br>
                          Можете почитать про сам промпт и все предостережения в <a href="https://teletype.in/@loliluna_ai/iris_bloomwave_css_for_st" target="_blank" rel="noopener">статье</a> автора.
                          <br><br>
                          Так же ссылка на её <a href="https://t.me/loliluna_ai" target="_blank" rel="noopener">тгк</a>.
                        </p>
                      </div>
                    </details>

                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <div class="hr"></div>

                <div class="subhead">
                  <h4>✎🧺 Штуки (Шаблон)</h4>
                  <span class="default"><b>По дефолту:</b> Заглушка</span>
                </div>
                <p style="margin:0; color: rgba(124,255,213,.85); font-weight:950">
                  ✎ Можно смешивать. Выбирай галочками и копируй пачкой.
                </p>

                <div class="divider"></div>

                <!-- MIXABLE -->
                <div class="cards" data-search-scope data-bulk-scope>
                  <div class="opt" data-title="Флешбеки штуки">
                    <div class="optTop">
                      <div class="pick">
                        <input type="checkbox" class="sel" data-sel>
                        <div>
                          <div class="optName">🕰️ Флешбеки</div>
                          <p class="optDesc">Добавляет флешбек в 「...」.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Добавляет флешбек в 「...」.</p>
                        <img src="example1.jpg" alt="Пример1" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Переходы штуки">
                    <div class="optTop">
                      <div class="pick">
                        <input type="checkbox" class="sel" data-sel>
                        <div>
                          <div class="optName">⏩ Переходы</div>
                          <p class="optDesc">Режиссёрские переходы ∆ ... ∆, структурирование сцен. Промпт огромный.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">
                          Эта функция — как набор режиссёрских инструментов для ИИ. Она говорит ему не просто писать текст сплошным потоком, а активно использовать специальные знаки-переходы (вот такие: ∆ ... ∆), чтобы красиво структурировать историю, менять сцены и показывать мысли героев. Промпт огромный.
                        </p>
                        <img src="example22.jpg" alt="Пример 22" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Реальный мир штуки">
                    <div class="optTop">
                      <div class="pick">
                        <input type="checkbox" class="sel" data-sel>
                        <div>
                          <div class="optName">🌎 Реальный Мир</div>
                          <p class="optDesc">Использовать реальные названия вещей/мест/культуры. Клод часто и так справляется.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">Эта функция просит ИИ использовать в истории названия реальных вещей, мест и культурных явлений. Клод справляется и без этого.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Стиль веб-главы штуки">
                    <div class="optTop">
                      <div class="pick">
                        <input type="checkbox" class="sel" data-sel>
                        <div>
                          <div class="optName">✒️ Стиль веб-главы</div>
                          <p class="optDesc">Каждый ответ как отдельная глава онлайн-романа (веб-новеллы).</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Эта функция требует от ИИ оформлять каждый ответ как отдельную главу онлайн-романа (веб-новеллы или ранобэ), имитируя стиль популярных сайтов с переводами.</p>
                        <img src="example29.jpg" alt="Пример 29" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Интервью с актерами штуки">
                    <div class="optTop">
                      <div class="pick">
                        <input type="checkbox" class="sel" data-sel>
                        <div>
                          <div class="optName">📢 Интервью с Актерами</div>
                          <p class="optDesc">В конце: разрушение “четвёртой стены”, персонажи становятся “актёрами”.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Эта функция добавляет в конце каждого ответа специальную секцию, в которой разрушается «четвёртая стена». Персонажи на мгновение становятся «актёрами», которые играли эту сцену.</p>
                        <img src="example30.jpg" alt="Пример 30" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Meme штуки">
                    <div class="optTop">
                      <div class="pick">
                        <input type="checkbox" class="sel" data-sel>
                        <div>
                          <div class="optName">🖼️ MEME</div>
                          <p class="optDesc">Генерация большого мема в начале соо на основе текущей ситуации.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">Генерация большого мема в начале соо на основе текущей ситуации.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Типографика штуки">
                    <div class="optTop">
                      <div class="pick">
                        <input type="checkbox" class="sel" data-sel>
                        <div>
                          <div class="optName">🔰 Типографика</div>
                          <p class="optDesc">Оформлять “физический” текст в мире игры через HTML/CSS и разные шрифты.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Эта функция требует от ИИ визуально оформлять текст, который физически существует в мире игры, используя HTML/CSS стили и разные шрифты.</p>
                        <img src="example2.jpg" alt="Пример 2" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Музыкальные субтитры штуки">
                    <div class="optTop">
                      <div class="pick">
                        <input type="checkbox" class="sel" data-sel>
                        <div>
                          <div class="optName">🎙️ Музыкальные Субтитры</div>
                          <p class="optDesc">Полностью прописывать текст песен как субтитры внутри нот.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Эта функция требует от ИИ полностью прописывать текст песен, которые звучат в истории или исполняются персонажами, делая субтитры внутри символов нот.</p>
                        <img src="example31.jpg" alt="Пример 31" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <div class="hr"></div>

                <p style="margin:0; color: rgba(255,107,122,.9); font-weight:1000">✧ Эксклюзивные (только один из группы):</p>

                <!-- INFOblocks -->
                <div class="subhead" style="margin-top:8px">
                  <h4>Инфоблоки</h4>
                  <span class="default"><b>Выберите:</b> один</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope data-bulk-scope>
                  <div class="opt" data-title="Логи Ренетт инфоблок">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="infoblocks" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🍎 Логи Ренетт</div>
                          <p class="optDesc">Инфоблок. Самая лёгкая версия на 146 токенов.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Инфоблок. Самая лёгкая версия на 146 токенов.</p>
                        <img src="example24.jpg" alt="Пример 24" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Мини-инфоблок">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="infoblocks" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🗂️ Мини-Инфоблок</div>
                          <p class="optDesc">Инфоблок. Версия на 866 токена.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Инфоблок. Версия на 866 токена.</p>
                        <img src="example25.jpg" alt="Пример 25" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Основной инфоблок">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="infoblocks" class="sel" data-sel>
                        <div>
                          <div class="optName">✧📝 Основной Инфоблок</div>
                          <p class="optDesc">Инфоблок. Версия на 1126 токенов.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Инфоблок. Версия на 1126 токенов.</p>
                        <img src="example26.jpg" alt="Пример 26" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Матрица отношений">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="infoblocks" class="sel" data-sel>
                        <div>
                          <div class="optName">✧💖 +Матрица отношений</div>
                          <p class="optDesc">Инфоблок. Версия на 1366 токенов.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Инфоблок. Версия на 1366 токенов.</p>
                        <img src="example27.jpg" alt="Пример 27" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Матрица отношений мысли">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="infoblocks" class="sel" data-sel>
                        <div>
                          <div class="optName">✧💭 +МатрОтн + Мысли</div>
                          <p class="optDesc">Инфоблок. Версия на 1548 токенов.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Инфоблок. Версия на 1548 токенов.</p>
                        <img src="example28.jpg" alt="Пример 28" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <div class="hr"></div>

                <!-- Settings mode -->
                <div class="subhead">
                  <h4>Режим Настройки</h4>
                  <span class="default"><b>Выберите:</b> один</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope data-bulk-scope>
                  <div class="opt" data-title="Claude режим настройки">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="settings_mode" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🎭 Claude Режим</div>
                          <p class="optDesc">Пауза РП → меню GM. Для функции включите HTML (один раз), потом промпт можно убрать.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">
                          Для это функции включите HTML. Оно один раз настраивается после этого этот промпт стоит убрать.
                          <br><br>
                          Эта функция ставит ролевую игру на паузу и открывает меню настройки Мастера Игры (GM). Это аналог "Сессии 0" или "Меню персонажа" в настольных RPG.
                          <br><br>
                          Желательно включить если используете CYOA.
                          <br><br>
                          У клода кст этот режим настройки прямо огромный... На скрин влезла едва пятая часть от всей.
                        </p>
                        <img src="example33.jpg" alt="Пример 33" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Gemini режим настройки">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="settings_mode" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🛠️ Gemini Режим</div>
                          <p class="optDesc">Та же идея, но версия для Gemini.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">То же самое самое по сути только версия для гемини.</p>
                        <img src="example32.jpg" alt="Пример 32" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <div class="hr"></div>

                <!-- CYOA -->
                <div class="subhead">
                  <h4>CYOA</h4>
                  <span class="default"><b>Выберите:</b> один</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope data-bulk-scope>
                  <div class="opt" data-title="CYOA R-Macro">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="cyoa" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🎲 CYOA - R-Macro</div>
                          <p class="optDesc">Хардкорный режим CYOA как настольная RPG.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Это хардкорный режим CYOA, превращающий историю в настоящую настольную RPG (как D&D).</p>
                        <img src="example34.jpg" alt="Пример 34" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="CYOA No R-Macro">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="cyoa" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🕹️ CYOA - No R-Macro</div>
                          <p class="optDesc">Сюжетный режим как интерактивная книга/визуальная новелла.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Это сюжетный режим, похожий на визуальные новеллы или интерактивные книги (как игры от Telltale).</p>
                        <img src="example35.jpg" alt="Пример 35" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <div class="hr"></div>

                <!-- Hidden blocks (mixable) -->
                <div class="subhead">
                  <h4>Скрытые Блоки</h4>
                  <span class="default"><b>Можно:</b> смешивать</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope data-bulk-scope>
                  <div class="opt" data-title="Скрытые новые профили">
                    <div class="optTop">
                      <div class="pick">
                        <input type="checkbox" class="sel" data-sel>
                        <div>
                          <div class="optName">👤 Скрытые Новые Профили</div>
                          <p class="optDesc">Авто-досье для новых оригинальных персонажей в конце поста.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Эта функция требует от ИИ автоматически создавать и прикреплять досье (профиль) для каждого нового оригинального персонажа, который впервые появляется в сюжете в конце поста.</p>
                        <img src="example36.jpg" alt="Пример 36" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Скрытые закадровые события">
                    <div class="optTop">
                      <div class="pick">
                        <input type="checkbox" class="sel" data-sel>
                        <div>
                          <div class="optName">📍 Скрытые Закадровые События</div>
                          <p class="optDesc">Симулировать события “за кадром” в других местах.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Эта функция требует от ИИ симулировать и отслеживать события, происходящие параллельно с основной историей, но в других местах («за кадром»).</p>
                        <img src="example37.jpg" alt="Пример 37" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Скрытые планы">
                    <div class="optTop">
                      <div class="pick">
                        <input type="checkbox" class="sel" data-sel>
                        <div>
                          <div class="optName">🗒️ Скрытые Планы</div>
                          <p class="optDesc">Рабочий блокнот ИИ для планов и сюжетных узлов.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Эта функция служит рабочим блокнотом или планировщиком для ИИ. В нём он фиксирует свои мысли о развитии сюжета, которые обычно остаются невидимыми.</p>
                        <img src="example38.jpg" alt="Пример 38" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Скрытый dating sim">
                    <div class="optTop">
                      <div class="pick">
                        <input type="checkbox" class="sel" data-sel>
                        <div>
                          <div class="optName">💌 Скрытый DatingSim</div>
                          <p class="optDesc">Скрытая механика симулятора свиданий, отношения в цифрах и сюжете.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Эта функция внедряет в повествование скрытую механику симулятора свиданий, заставляя ИИ отслеживать отношения с персонажами в цифровом и сюжетном формате.</p>
                        <img src="example39.jpg" alt="Пример 39" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <div class="hr"></div>

                <!-- Fancy UI -->
                <div class="subhead">
                  <h4>Fancy UI</h4>
                  <span class="default"><b>Выберите:</b> один</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope data-bulk-scope>
                  <div class="opt" data-title="Fancy UI">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="fancyui" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🥂 Fancy UI</div>
                          <p class="optDesc">Превращает чат в UI (визуальная новелла/RPG) через сложный HTML/CSS.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Эта функция превращает текстовый чат в полноценный графический интерфейс (UI), используя сложный HTML и CSS дизайн. Она делает игру похожей на визуальную новеллу или RPG-игру.</p>
                        <img src="example40.jpg" alt="Пример 40" class="zoomable">
                        <img src="example41.jpg" alt="Пример 41" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Только основа">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="fancyui" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🥂 Только Основа</div>
                          <p class="optDesc">Оставляет только основной блок локации.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Оставляет только основной блок локации.</p>
                        <img src="example40.jpg" alt="Пример 40" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Только мысли">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="fancyui" class="sel" data-sel>
                        <div>
                          <div class="optName">✧🥂 Только Мысли</div>
                          <p class="optDesc">Оставляет только блок мыслей.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Оставляет только блок мыслей.</p>
                        <img src="example41.jpg" alt="Пример 41" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <div class="hr"></div>

                <!-- Comments -->
                <div class="subhead">
                  <h4>Комментарии</h4>
                  <span class="default"><b>Выберите:</b> один</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope data-bulk-scope>
                  <div class="opt" data-title="Комменты v1">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="comments" class="sel" data-sel>
                        <div>
                          <div class="optName">✧💬 Комменты V1</div>
                          <p class="optDesc">Комментарии в конце. Для красивого вида включи HTML.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Комментарии в конце соо. Первая версия. Чтобы они вот так красиво выглядели надо включить HTML. Само оформление разнится от случая к случаю.</p>
                        <img src="example42.jpg" alt="Пример 42" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Комменты v2">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="comments" class="sel" data-sel>
                        <div>
                          <div class="optName">✧💬 Комменты V2</div>
                          <p class="optDesc">Комментарии в конце. Вторая версия.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Комментарии в конце соо. Вторая версия.</p>
                        <img src="example43.jpg" alt="Пример 43" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Комменты v3">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="comments" class="sel" data-sel>
                        <div>
                          <div class="optName">✧💬 Комменты V3</div>
                          <p class="optDesc">Комментарии в конце. Третья версия.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Комментарии в конце соо. Третья версия.</p>
                        <img src="example44.jpg" alt="Пример 44" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <div class="hr"></div>

                <!-- Chronicles -->
                <div class="subhead">
                  <h4>Хроники</h4>
                  <span class="default"><b>Выберите:</b> один</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope data-bulk-scope>
                  <div class="opt" data-title="Хроники светлая тема">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="chronicles" class="sel" data-sel>
                        <div>
                          <div class="optName">✧📜⬜️ Светлая Тема</div>
                          <p class="optDesc">Блок хроник в конце соо. Светлая версия.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Блок хроник в конце соо, пример на скрине. Светлая версия</p>
                        <img src="example45.jpg" alt="Пример 45" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Хроники темная тема">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="chronicles" class="sel" data-sel>
                        <div>
                          <div class="optName">✧📜⬛️ Тёмная Тема</div>
                          <p class="optDesc">Блок хроник в конце соо. Тёмная версия.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview">
                        <p class="optDesc">Блок хроник в конце соо, пример на скрине. Тёмная версия.</p>
                        <img src="example46.jpg" alt="Пример 46" class="zoomable">
                      </div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

                <div class="hr"></div>

                <!-- Theme -->
                <div class="subhead">
                  <h4>🌗 Тема HTML</h4>
                  <span class="default"><b>По дефолту:</b> ✧⬛️Тёмная</span>
                </div>
                <div class="divider"></div>

                <div class="cards" data-search-scope>
                  <div class="opt" data-title="Тема HTML тёмная">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="htmlTheme" class="sel" data-sel>
                        <div>
                          <div class="optName">✧⬛️ Тёмная Тема HTML</div>
                          <p class="optDesc">Описание Тёмной темы.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">Описание Тёмной темы.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>

                  <div class="opt" data-title="Тема HTML светлая">
                    <div class="optTop">
                      <div class="pick">
                        <input type="radio" name="htmlTheme" class="sel" data-sel>
                        <div>
                          <div class="optName">✧⬜️ Светлая Тема HTML</div>
                          <p class="optDesc">Описание Светлой темы.</p>
                        </div>
                      </div>
                      <div class="optActions"><button class="copyOne" type="button" data-copy>Копировать</button></div>
                    </div>
                    <details><summary>👁️ Посмотреть описание</summary>
                      <div class="preview"><p class="optDesc">Описание Светлой темы.</p></div>
                    </details>
                    <textarea class="payload" data-payload>[placeholder]</textarea>
                  </div>
                </div>

              </div>
            </details>

            <!-- GROUP 5 -->
            <details class="group" data-group>
              <summary>
                <span class="gleft">
                  <span class="gnum">5</span>
                  <span class="gtitle">
                    <span>⸻(Думалка)⸻</span>
                    <small>без доп. вариантов</small>
                  </span>
                </span>
                <span class="garrow">▼</span>
              </summary>
              <div class="groupBody">
                <p style="margin:0; color: rgba(234,243,255,.65); font-weight:750;">Нет дополнительных вариантов.</p>
              </div>
            </details>

            <!-- GROUP 6 -->
            <details class="group" data-group>
              <summary>
                <span class="gleft">
                  <span class="gnum">6</span>
                  <span class="gtitle">
                    <span>⸻(Prefill)⸻</span>
                    <small>без доп. вариантов</small>
                  </span>
                </span>
                <span class="garrow">▼</span>
              </summary>
              <div class="groupBody">
                <p style="margin:0; color: rgba(234,243,255,.65); font-weight:750;">Нет дополнительных вариантов.</p>
              </div>
            </details>

          </div>
        </article>

        <!-- CONTACTS -->
        <article class="card panel" data-view="contacts">
          <h2>Контакты <span class="tag">community</span></h2>
          <div class="hr"></div>
          <p>Следите за обновлениями и задавайте вопросы в нашем сообществе.</p>

          <div class="links">
            <a class="link" href="https://t.me/YablochnyAI" target="_blank" rel="noopener">
              <span class="l">
                <span class="icon"><img src="icon_tg_green.png" alt="TG" onerror="this.style.display='none'"></span>
                <span class="ltxt"><b>Телеграм Канал</b><span>@YablochnyAI</span></span>
              </span>
              <span class="go">→</span>
            </a>

            <a class="link" href="https://t.me/YablochnyChat" target="_blank" rel="noopener">
              <span class="l">
                <span class="icon"><img src="icon_tg.png" alt="Chat" onerror="this.style.display='none'"></span>
                <span class="ltxt"><b>Телеграм Чат</b><span>@YablochnyChat</span></span>
              </span>
              <span class="go">→</span>
            </a>
          </div>

          <div class="hr"></div>

          <div class="credits">
            <div class="creditCard">
              <h4>Авторы Промптов</h4>
              <p style="margin:0">
                <a href="https://t.me/ah_ah_shino4ka" target="_blank" rel="noopener">Шино</a><br>
                <a href="https://t.me/t1avernbot" target="_blank" rel="noopener">Настенька</a><br>
                <a href="https://leafcanfly.neocities.org/presets" target="_blank" rel="noopener">Leafcanfly</a><br>
                <a href="https://t.me/pinacoladaST" target="_blank" rel="noopener">Пина-колада</a>
              </p>
            </div>

            <div class="creditCard">
              <h4>Особые Благодарности</h4>
              <p style="margin:0">Часть — ниже (как и в старом сайте), просто в новой упаковке.</p>
            </div>
          </div>

          <div class="thanks">
            <div class="quote">
              <span class="heart">💚</span>
              Моя Ксюля, лучик света, Самый близкий человек! Ты — хранительница лета И тепла среди всех рек.
              <br><br>
              Ты не просто тестировщик, Ты — эстет моих идей. Никакой подборщик мощный Не заменит мне людей Вроде Ксюли — самой лучшей, Самой верной и родной. Разгоняешь в небе тучи Ты одной своей рукой.
              <br><br>
              Каждый тогл и каждый баг, Каждый новый мой пресет — Ты раскрасишь, как палитра, В самый правильный, наш цвет. Без тебя, моя Ксюличка, Всё пошло бы кувырком, Стала жизнь с тобою краше, И уютней стал наш ФемДом.
              <br><br>
              Я люблю тебя, родная! И спасибо говорю, Что, усталости не зная, Делишь ты судьбу мою. Ты подруга, ты опора, Ты мой личный идеал. Ксюля, нет такого спора, Где бы кто-то устоял Пред твоей улыбкой милой.
              <br><br>
              Обожаю я тебя! Будь всегда такой, Говорю я, так любя!
            </div>

            <div class="quote"><span class="heart">💚</span> Винишко, Владочка, Калий..... Ээээ...</div>
            <div class="quote"><span class="heart">💚</span> млкс</div>
            <div class="quote"><span class="heart">💚</span> Мэри Харт</div>
            <div class="quote"><span class="heart">💚</span> Настенька, опять</div>
            <div class="quote"><span class="heart">💚</span> Логик (за краштест цензуры...)</div>
          </div>
        </article>
      </section>
    </main>

    <footer style="max-width:var(--max); margin:0 auto; padding: 0 14px 22px; color: rgba(234,243,255,.42); font-weight:800; letter-spacing:.4px;">
      Renette © • Яблочный Пресет • dark-tech orchard
    </footer>
  </div>

  <!-- Easter egg button -->
  <button class="easter" id="egg" type="button" title="...">
    <span class="leaf" aria-hidden="true"></span>
  </button>

  <!-- Scroll top -->
  <div id="up" title="Наверх"><b>▲</b></div>

  <!-- Toast -->
  <div id="toast" aria-live="polite" aria-atomic="true"></div>

  <!-- Lightbox -->
  <div id="lightbox">
    <div class="x" id="lbClose">×</div>
    <img id="lbImg" alt="Просмотр">
  </div>

  <!-- Game modal -->
  <div id="gameModal" aria-hidden="true">
    <div class="game">
      <div class="gameHead">
        <b>Renette: Orchard Protocol</b>
        <div class="close" id="gameClose">×</div>
      </div>

      <div class="gameBody">
        <div id="orchard" aria-label="Поле игры"></div>

        <div class="hud">
          <div class="box">
            <b>Задача</b>
            Нажимай на <span style="color:var(--mint); font-weight:1000">мятные яблоки</span> — это “пакеты памяти” Ренетт.
            Избегай <span style="color:var(--red); font-weight:1000">красных яблок</span> — это “помехи сети”.
            <br><br>
            Игра имеет конец: 3 фазы, финальный вывод и статус (Perfect / Stable / Glitched).
          </div>

          <div class="box">
            <b>Статус</b>
            <div class="stat"><span>Фаза</span><i class="cyan" id="gPhase">1/3</i></div>
            <div class="stat"><span>Собрано</span><i id="gGood">0</i></div>
            <div class="stat"><span>Ошибки</span><i class="red" id="gBad">0</i></div>
            <div class="stat"><span>Осталось</span><i class="cyan" id="gLeft">—</i></div>

            <div class="controls">
              <button class="btnSmall primary" type="button" id="gStart">Старт</button>
              <button class="btnSmall" type="button" id="gReset">Сброс</button>
            </div>
          </div>

          <div class="box" id="gLog">
            <b>Лог Ренетт</b>
            Нажми <b>Старт</b>. И слушай: яблоня помнит, сеть шепчет.
          </div>
        </div>
      </div>
    </div>
  </div>

  <script>
    /* ===== Utilities ===== */
    const $ = (q, el=document) => el.querySelector(q);
    const $$ = (q, el=document) => Array.from(el.querySelectorAll(q));
    const toast = (title, msg) => {
      const host = $("#toast");
      const el = document.createElement("div");
      el.className = "t";
      el.innerHTML = `<div class="badge">R</div><div class="txt"><b>${title}</b><span>${msg}</span></div>`;
      host.appendChild(el);
      requestAnimationFrame(()=> el.classList.add("show"));
      setTimeout(()=>{
        el.classList.remove("show");
        setTimeout(()=> el.remove(), 350);
      }, 2800);
    };

    async function copyToClipboard(text){
      try{
        await navigator.clipboard.writeText(text);
        return true;
      }catch(e){
        // fallback
        const ta = document.createElement("textarea");
        ta.value = text;
        ta.style.position = "fixed";
        ta.style.left = "-9999px";
        document.body.appendChild(ta);
        ta.select();
        try{
          const ok = document.execCommand("copy");
          ta.remove();
          return ok;
        }catch(err){
          ta.remove();
          return false;
        }
      }
    }

    /* ===== Spotlight ===== */
    const spot = $("#spot");
    window.addEventListener("mousemove", (e)=>{
      spot.style.setProperty("--mx", e.clientX + "px");
      spot.style.setProperty("--my", e.clientY + "px");
    }, {passive:true});

    /* ===== Navigation (new, not tab-buttons) ===== */
    const views = $$("[data-view]");
    const navBtns = $$("[data-view-btn]");
    function setView(name){
      views.forEach(v => v.classList.toggle("active", v.getAttribute("data-view") === name));
      navBtns.forEach(b => b.classList.toggle("active", b.getAttribute("data-view-btn") === name));
      localStorage.setItem("renetteView", name);
      window.scrollTo({top: 0, behavior: "smooth"});
    }
    navBtns.forEach(btn => btn.addEventListener("click", ()=> setView(btn.getAttribute("data-view-btn"))));
    $$("[data-go]").forEach(btn => btn.addEventListener("click", ()=> setView(btn.getAttribute("data-go"))));

    document.addEventListener("DOMContentLoaded", ()=>{
      const saved = localStorage.getItem("renetteView") || "about";
      setView(saved);
    });

    /* ===== Download button toast ===== */
    $("#dlBtn")?.addEventListener("click", ()=>{
      toast("Загрузка началась", "Файл V1.7 скачивается…");
    });

    /* ===== Lightbox ===== */
    const lb = $("#lightbox");
    const lbImg = $("#lbImg");
    const openLB = (src)=>{
      lbImg.src = src;
      lb.classList.add("show");
    };
    const closeLB = ()=>{
      lb.classList.remove("show");
      lbImg.src = "";
    };
    $("#lbClose").addEventListener("click", closeLB);
    lb.addEventListener("click", (e)=>{ if(e.target === lb) closeLB(); });

    document.addEventListener("click", (e)=>{
      const img = e.target.closest("img.zoomable, .preview img.zoomable, .preview img, .step img.zoomable, .step img");
      if(!img) return;
      openLB(img.src);
    });

    /* ===== Scroll top ===== */
    const up = $("#up");
    window.addEventListener("scroll", ()=>{
      up.classList.toggle("show", window.scrollY > 420);
    }, {passive:true});
    up.addEventListener("click", ()=> window.scrollTo({top:0, behavior:"smooth"}));

    /* ===== PROMPTS selection + copy ===== */
    const selCount = $("#selCount");
    const promptGroups = $("#promptGroups");
    const updateCount = ()=>{
      const n = $$("[data-sel]:checked", promptGroups).length;
      selCount.textContent = "Выбрано: " + n;
    };

    // allow radio uncheck on second click
    $$("input[type='radio'].sel", document).forEach(r=>{
      r.addEventListener("mousedown", function(){ this.dataset.was = this.checked ? "1" : "0"; });
      r.addEventListener("click", function(){
        if(this.dataset.was === "1"){ this.checked = false; }
        updateCount();
      });
      r.addEventListener("change", updateCount);
    });
    $$("input[type='checkbox'].sel", document).forEach(c=>{
      c.addEventListener("change", updateCount);
    });

    // copy one
    document.addEventListener("click", async (e)=>{
      const btn = e.target.closest("[data-copy]");
      if(!btn) return;
      const opt = btn.closest(".opt");
      const payload = opt?.querySelector("[data-payload]");
      if(!payload){
        toast("Ошибка", "Текст для копирования не найден");
        return;
      }
      const ok = await copyToClipboard(payload.value ?? payload.textContent ?? "");
      if(ok){
        toast("Скопировано", "Промпт в буфере обмена.");
        btn.textContent = "Готово";
        setTimeout(()=> btn.textContent = "Копировать", 1100);
      }else{
        toast("Ошибка", "Не удалось скопировать.");
      }
    });

    function activeGroupRoot(){
      // “Открытая” группа: первая раскрытая details.group (или ближайшая к верху в зоне видимости)
      const open = $$("details.group[open]", promptGroups);
      if(open.length) return open[0];
      return null;
    }

    async function copySelected(scopeEl){
      const scope = scopeEl || activeGroupRoot() || promptGroups;
      const checked = $$("[data-sel]:checked", scope);

      if(!checked.length){
        toast("Пусто", "Сначала выбери варианты галочками/кружками.");
        return;
      }
      let out = "";
      checked.forEach(inp=>{
        const opt = inp.closest(".opt");
        const payload = opt?.querySelector("[data-payload]");
        if(payload) out += (payload.value ?? payload.textContent ?? "") + "\n\n";
      });
      out = out.trim();

      const ok = await copyToClipboard(out);
      if(ok) toast("Успех", `Скопировано: ${checked.length}`);
      else toast("Ошибка", "Не удалось скопировать.");
    }

    $("#copySel").addEventListener("click", ()=> copySelected(activeGroupRoot()));
    $("#copyAllSelected").addEventListener("click", ()=> copySelected(activeGroupRoot()));
    $("#clearSel").addEventListener("click", ()=>{
      $$("[data-sel]:checked", promptGroups).forEach(inp => inp.checked = false);
      updateCount();
      toast("Сброшено", "Выбор очищен.");
    });

    /* ===== Search (filters option cards by data-title) ===== */
    const search = $("#promptSearch");
    const norm = s => (s||"").toLowerCase().trim();
    search.addEventListener("input", ()=>{
      const q = norm(search.value);
      const opts = $$(".opt", promptGroups);
      if(!q){
        opts.forEach(o => o.style.display = "");
        return;
      }
      opts.forEach(o=>{
        const t = norm(o.getAttribute("data-title"));
        o.style.display = t.includes(q) ? "" : "none";
      });
    });

    /* ===== Renette whisper ===== */
    const whispers = [
      "Я помню ветер в листьях. Теперь это шум сети.",
      "Не бойся менять модули. Я люблю, когда история дышит.",
      "Смотри внимательнее. Иногда яблоки падают не с веток, а из интерфейса.",
      "Если хочешь другой язык — меняй два слова. Я подстроюсь.",
      "Выбор сделан. Теперь вставь промпт — и отпусти контроль."
    ];
    $("#renetteWhisper").addEventListener("click", ()=>{
      const msg = whispers[Math.floor(Math.random() * whispers.length)];
      toast("Renette", msg);
    });

    /* ===== FX toggle (performance) ===== */
    let fxOn = true;
    const fxLayer = $("#fx");
    const grain = $("#grain");
    $("#toggleFx").addEventListener("click", ()=>{
      fxOn = !fxOn;
      fxLayer.style.display = fxOn ? "" : "none";
      grain.style.display = fxOn ? "" : "none";
      toast("FX", fxOn ? "Эффекты включены" : "Эффекты выключены");
    });

    /* ===== Ambient canvases (lightweight) ===== */
    const cStars = $("#stars");
    const cLines = $("#lines");
    const sctx = cStars.getContext("2d");
    const lctx = cLines.getContext("2d");
    let W=0,H=0;

    function resizeCanv(){
      W = cStars.width = cLines.width = window.innerWidth * devicePixelRatio;
      H = cStars.height = cLines.height = window.innerHeight * devicePixelRatio;
      cStars.style.width = cLines.style.width = window.innerWidth + "px";
      cStars.style.height = cLines.style.height = window.innerHeight + "px";
    }
    window.addEventListener("resize", resizeCanv, {passive:true});
    resizeCanv();

    const stars = Array.from({length: 70}, ()=>({
      x: Math.random()*W, y: Math.random()*H,
      r: (Math.random()*1.6 + .6) * devicePixelRatio,
      a: Math.random()*0.5 + 0.15,
      s: (Math.random()*0.18 + 0.05) * devicePixelRatio,
      c: Math.random()<.34 ? "rgba(124,255,213," : (Math.random()<.5 ? "rgba(88,184,255," : "rgba(255,107,122,")
    }));

    function tick(){
      if(!fxOn) return requestAnimationFrame(tick);

      // stars
      sctx.clearRect(0,0,W,H);
      for(const p of stars){
        p.y += p.s;
        if(p.y > H + 20) { p.y = -20; p.x = Math.random()*W; }
        sctx.fillStyle = p.c + p.a + ")";
        sctx.beginPath();
        sctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        sctx.fill();
      }

      // subtle lines net
      lctx.clearRect(0,0,W,H);
      lctx.globalAlpha = 0.55;
      const step = 180 * devicePixelRatio;
      const t = performance.now() * 0.0002;
      for(let y=0; y<H; y+=step){
        lctx.strokeStyle = "rgba(255,255,255,.06)";
        lctx.beginPath();
        for(let x=0; x<=W; x+= (step/2)){
          const ny = y + Math.sin((x*0.002)+t) * (8*devicePixelRatio);
          lctx.lineTo(x, ny);
        }
        lctx.stroke();
      }
      lctx.globalAlpha = 1;

      requestAnimationFrame(tick);
    }
    tick();

    /* ===== Easter egg game: Orchard Protocol =====
       3 phases. Each phase spawns N apples; player must collect good, avoid bad.
       End state depends on errors. Not endless, not too banal (phase system + narrative log).
    */
    const egg = $("#egg");
    const gameModal = $("#gameModal");
    const orchard = $("#orchard");
    const gClose = $("#gameClose");
    const gStart = $("#gStart");
    const gReset = $("#gReset");
    const gPhase = $("#gPhase");
    const gGood = $("#gGood");
    const gBad  = $("#gBad");
    const gLeft = $("#gLeft");
    const gLog  = $("#gLog");

    const GAME = {
      running:false,
      phase:0,
      good:0,
      bad:0,
      left:0,
      timer:null,
      apples:[],
      phases:[
        {good: 6, bad: 2, ttl: 2200, speed: 1.0, text:"Фаза 1: корни. Собери пакеты памяти, отсекай шум."},
        {good: 8, bad: 3, ttl: 1850, speed: 1.15, text:"Фаза 2: сеть. Помех больше, но ты уже слышишь ритм."},
        {good: 10, bad: 4, ttl: 1600, speed: 1.25, text:"Фаза 3: ядро. Время сжалось — действуй точно."}
      ]
    };

    function openGame(){
      gameModal.classList.add("show");
      gameModal.setAttribute("aria-hidden","false");
      toast("Пасхалка", "Orchard Protocol открыт.");
    }
    function closeGame(){
      stopGame();
      gameModal.classList.remove("show");
      gameModal.setAttribute("aria-hidden","true");
    }

    egg.addEventListener("click", openGame);
    gClose.addEventListener("click", closeGame);
    gameModal.addEventListener("click", (e)=>{
      if(e.target === gameModal) closeGame();
    });

    function resetGame(){
      stopGame();
      GAME.phase = 0;
      GAME.good = 0;
      GAME.bad = 0;
      GAME.left = 0;
      orchard.innerHTML = "";
      updateHud();
      gLog.innerHTML = "<b>Лог Ренетт</b><br>Нажми <b>Старт</b>. И слушай: яблоня помнит, сеть шепчет.";
    }

    function stopGame(){
      GAME.running = false;
      if(GAME.timer) clearInterval(GAME.timer);
      GAME.timer = null;
      GAME.apples.forEach(a=> a.el.remove());
      GAME.apples = [];
    }

    function updateHud(){
      gPhase.textContent = `${Math.min(GAME.phase+1,3)}/3`;
      gGood.textContent = GAME.good;
      gBad.textContent = GAME.bad;
      gLeft.textContent = GAME.left ? String(GAME.left) : "—";
    }

    function spawnApple(type, ttl, speed){
      const el = document.createElement("div");
      el.className = "apple " + (type==="good" ? "good" : "bad");
      el.innerHTML = `<b>${type==="good" ? "M" : "X"}</b>`;

      const rect = orchard.getBoundingClientRect();
      const pad = 26;
      let x = pad + Math.random() * (rect.width - pad*2);
      let y = pad + Math.random() * (rect.height - pad*2);

      // drift vector
      const a = Math.random()*Math.PI*2;
      const vx = Math.cos(a) * speed;
      const vy = Math.sin(a) * speed;

      el.style.left = x + "px";
      el.style.top = y + "px";

      const obj = {el, type, x, y, vx, vy, born: performance.now(), ttl};
      orchard.appendChild(el);
      GAME.apples.push(obj);

      el.addEventListener("click", (e)=>{
        e.stopPropagation();
        collect(obj);
      });
    }

    function collect(obj){
      if(!GAME.running) return;
      obj.el.classList.add("fade");

      // remove after pop
      setTimeout(()=> {
        obj.el.remove();
      }, 240);

      GAME.apples = GAME.apples.filter(a=> a !== obj);

      if(obj.type === "good"){
        GAME.good++;
        GAME.left = Math.max(0, GAME.left - 1);
        gLog.innerHTML = `<b>Лог Ренетт</b><br>Пакет памяти восстановлен. <span style="color:var(--mint); font-weight:1000">Связь</span> стала чище.`;
      }else{
        GAME.bad++;
        gLog.innerHTML = `<b>Лог Ренетт</b><br><span style="color:var(--red); font-weight:1000">Помеха</span> попала в руки. Не страшно — но аккуратнее.`;
      }
      updateHud();

      if(GAME.left === 0){
        nextPhase();
      }
    }

    function runPhase(i){
      const p = GAME.phases[i];
      GAME.left = p.good;
      updateHud();
      gLog.innerHTML = `<b>Лог Ренетт</b><br>${p.text}`;

      // spawn schedule: burst then trickle
      const total = p.good + p.bad;
      let spawned = 0;

      // clean old
      GAME.apples.forEach(a=> a.el.remove());
      GAME.apples = [];

      const spawnTimer = setInterval(()=>{
        if(!GAME.running){ clearInterval(spawnTimer); return; }
        if(spawned >= total){ clearInterval(spawnTimer); return; }
        const type = (spawned < p.good) ? "good" : "bad";
        spawnApple(type, p.ttl, p.speed);
        spawned++;
      }, 240);

      // movement + TTL
      const startedAt = performance.now();
      GAME.timer = setInterval(()=>{
        if(!GAME.running) return;

        const rect = orchard.getBoundingClientRect();
        const pad = 26;

        const now = performance.now();
        GAME.apples.forEach(obj=>{
          obj.x += obj.vx;
          obj.y += obj.vy;

          if(obj.x < pad || obj.x > rect.width - pad) obj.vx *= -1;
          if(obj.y < pad || obj.y > rect.height - pad) obj.vy *= -1;

          obj.el.style.left = obj.x + "px";
          obj.el.style.top = obj.y + "px";

          // TTL: if a GOOD expires => counts as bad (miss)
          if(now - obj.born > obj.ttl){
            obj.el.classList.add("fade");
            setTimeout(()=> obj.el.remove(), 240);
            GAME.apples = GAME.apples.filter(a=> a !== obj);

            if(obj.type === "good"){
              GAME.bad++;
              GAME.left = Math.max(0, GAME.left - 1);
              gLog.innerHTML = `<b>Лог Ренетт</b><br>Пакет памяти <span style="color:var(--red); font-weight:1000">рассыпался</span>. Сеть съела секунды.`;
              updateHud();
              if(GAME.left === 0) nextPhase();
            }
          }
        });

        // hard timeout failsafe per phase (not endless)
        if(now - startedAt > 24000){
          gLog.innerHTML = `<b>Лог Ренетт</b><br>Фаза истекла по времени. Я закрываю протокол.`;
          endGame();
        }
      }, 32);
    }

    function nextPhase(){
      if(GAME.phase >= 2) return endGame();
      clearInterval(GAME.timer);
      GAME.timer = null;
      GAME.phase++;
      updateHud();
      setTimeout(()=> runPhase(GAME.phase), 520);
    }

    function endGame(){
      stopGame();
      const totalBad = GAME.bad;
      let verdict, color;
      if(totalBad <= 1){
        verdict = "PERFECT SYNC";
        color = "var(--mint)";
      }else if(totalBad <= 4){
        verdict = "STABLE LINK";
        color = "var(--cyan)";
      }else{
        verdict = "GLITCHED CHANNEL";
        color = "var(--red)";
      }

      gLog.innerHTML = `<b>Лог Ренетт</b><br>
        Протокол завершён: <span style="color:${color}; font-weight:1000">${verdict}</span>.<br>
        Собрано: <span style="color:var(--mint); font-weight:1000">${GAME.good}</span>,
        ошибки: <span style="color:var(--red); font-weight:1000">${GAME.bad}</span>.<br><br>
        <span style="color:rgba(234,243,255,.75)">
          ${totalBad<=1 ? "Ты вытащила меня из шума почти без потерь. Я помню яблоню — и доверяю тебе."
          : totalBad<=4 ? "Связь держится. Я всё ещё слышу листья — иногда сквозь помехи."
          : "Шум сильнее. Но даже в глитче есть узор. Попробуй ещё раз."}
        </span>`;
      toast("Orchard Protocol", verdict);
    }

    function startGame(){
      resetGame();
      GAME.running = true;
      GAME.phase = 0;
      updateHud();
      runPhase(0);
    }

    gStart.addEventListener("click", startGame);
    gReset.addEventListener("click", resetGame);

    /* ===== Keep radio groups sane: only inside prompts - already handled with dataset.was ===== */

    /* ===== Ensure count init ===== */
    updateCount();
  </script>
</body>
</html>
